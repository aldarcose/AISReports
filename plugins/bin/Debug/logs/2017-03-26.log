2017-03-26 16:30:40.3161 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-26 16:30:40.3851 DEBUG Получено записей: 187
2017-03-26 16:30:44.0113 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-26 16:30:44.0113 DEBUG Parameters: @patterncode=, @operator=
2017-03-26 16:30:44.0363 DEBUG Result 
2017-03-26 16:30:44.0363 DEBUG нет шаблона для пользователя
2017-03-26 16:30:44.0363 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-26 16:30:44.0363 DEBUG Parameters: @patterncode 
2017-03-26 16:30:44.0483 DEBUG Result 
2017-03-26 16:30:44.0883 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-26 16:30:44.0883 DEBUG Parameters: @patterncode=, @operator=
2017-03-26 16:30:44.0983 DEBUG Result 
2017-03-26 16:30:44.0983 DEBUG нет шаблона для пользователя
2017-03-26 16:30:44.0983 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-26 16:30:44.0983 DEBUG Parameters: @patterncode 
2017-03-26 16:30:44.1083 DEBUG Result 
2017-03-26 16:30:44.5573 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-26 16:30:44.5613 DEBUG Получено записей: 9
2017-03-26 16:30:44.5613 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-26 16:30:44.5613 DEBUG Получено записей: 4
2017-03-26 16:30:44.5843 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-26 16:30:44.5843 DEBUG Получено записей: 22
2017-03-26 16:30:44.6003 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-26 16:30:44.6003 DEBUG Получено записей: 3
2017-03-26 16:30:44.6133 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-26 16:30:44.6133 DEBUG Получено записей: 29
2017-03-26 16:30:44.6303 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-26 16:30:44.6303 DEBUG Получено записей: 15
2017-03-26 16:30:44.6433 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-26 16:30:44.6693 DEBUG Получено записей: 113
2017-03-26 16:30:45.0813 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-26 16:30:45.0943 DEBUG Получено записей: 113
2017-03-26 16:30:45.0943 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-26 16:30:45.1073 DEBUG Получено записей: 8
2017-03-26 16:30:45.1073 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-26 16:30:45.1073 DEBUG Получено записей: 9
2017-03-26 16:30:45.1303 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-26 16:30:45.1303 DEBUG Получено записей: 176
2017-03-26 16:30:45.1483 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-26 16:30:45.3863 DEBUG Получено записей: 13813
2017-03-26 16:35:08.7254 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-26 16:35:08.7254 DEBUG Получено записей: 11
2017-03-26 16:35:08.7464 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-26 16:35:08.7534 DEBUG Получено записей: 77
2017-03-26 16:35:08.8064 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-26 16:35:08.8134 DEBUG Получено записей: 107
2017-03-26 16:35:09.1044 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-26 16:35:09.1174 DEBUG Получено записей: 113
2017-03-26 16:35:14.3147 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-26 16:35:14.3147 DEBUG PatientFindForm OperatorId: 2469
2017-03-26 16:35:14.3147 DEBUG PatientFindForm DoctorId: 2469
2017-03-26 16:35:15.5328 DEBUG DoctorQuery
2017-03-26 16:35:15.5328 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-26 16:35:15.5328 DEBUG @date: 26.03.2017
2017-03-26 16:35:15.5328 DEBUG @doctor: 2469
2017-03-26 16:35:15.5348 DEBUG bindQueryToDataGrid
2017-03-26 16:35:15.5348 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-26 16:35:15.5348 DEBUG SqlParams:
2017-03-26 16:35:15.5348 DEBUG SqlParam @date='26.03.2017'
2017-03-26 16:35:15.5348 DEBUG SqlParam @doctor=2469
2017-03-26 16:35:48.8767 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-26 16:35:48.8767 DEBUG SqlParams:
2017-03-26 16:35:48.8767 DEBUG SqlParam @fam=вахрушкина%
2017-03-26 16:35:48.8767 DEBUG SqlParam @nam=алевтина%
2017-03-26 16:35:52.5569 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-26 16:35:52.6349 DEBUG Получено записей: 4
2017-03-26 16:35:52.7209 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-26 16:35:52.7209 DEBUG Получено записей: 1
2017-03-26 16:35:52.7559 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-26 16:35:52.8019 DEBUG Получено записей: 0
2017-03-26 16:35:52.8849 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-26 16:35:57.1812 DEBUG Получено записей: 491
2017-03-26 16:36:02.1045 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-26 16:36:02.1045 DEBUG Получено записей: 2
2017-03-26 16:36:02.2755 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-26 16:36:02.2755 DEBUG Получено записей: 4
2017-03-26 16:36:05.7847 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-26 16:36:05.7847 DEBUG PatientFindForm OperatorId: 2469
2017-03-26 16:36:05.7847 DEBUG PatientFindForm DoctorId: 2469
2017-03-26 16:36:05.8807 DEBUG DoctorQuery
2017-03-26 16:36:05.8807 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-26 16:36:05.8807 DEBUG @date: 26.03.2017
2017-03-26 16:36:05.8807 DEBUG @doctor: 2469
2017-03-26 16:36:05.8807 DEBUG bindQueryToDataGrid
2017-03-26 16:36:05.8807 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-26 16:36:05.8807 DEBUG SqlParams:
2017-03-26 16:36:05.8807 DEBUG SqlParam @date='26.03.2017'
2017-03-26 16:36:05.8807 DEBUG SqlParam @doctor=2469
2017-03-26 16:36:55.9365 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-26 16:36:55.9395 DEBUG Получено записей: 4
2017-03-26 16:36:56.0886 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-03-26 16:36:56.0946 DEBUG Получено записей: 1
2017-03-26 16:36:56.1116 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls, p.kod_rias FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-03-26 16:36:58.0137 DEBUG Получено записей: 36319
2017-03-26 16:37:01.4689 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls, p.kod_rias FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-03-26 16:37:03.1310 DEBUG Получено записей: 36319
2017-03-26 16:37:03.4290 DEBUG Запрос: select name from codifiers.signa_tab order by name;
2017-03-26 16:37:03.4290 DEBUG Получено записей: 20
2017-03-26 16:37:03.4580 DEBUG Запрос: SELECT d.*,c.name as character_name, v.name AS type_name, m.mkb as mkb_name, s.name_stadiya as stadia_name, v.sort as diagn_type_sort FROM diagn_tab d LEFT JOIN public.sp_stadiya_diagn_tab s ON d.stage_of_disease = s.sp_stadiya_diagn_id LEFT JOIN codifiers.sp_disease_vid_tab v ON v.id = d.sp_disease_vid_id LEFT JOIN codifiers.diagn_type_tab c ON d.diagn_type_id = c.id LEFT JOIN mkb_tab m ON m.kod_d = d.diagn_osn WHERE d.talon_id = @id
2017-03-26 16:37:03.4580 DEBUG Получено записей: 4
