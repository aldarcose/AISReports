2017-03-30 08:45:17.3564 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-30 08:45:17.4724 DEBUG Получено записей: 187
2017-03-30 08:45:21.5327 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 08:45:21.5327 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 08:45:21.5597 DEBUG Result 
2017-03-30 08:45:21.5597 DEBUG нет шаблона для пользователя
2017-03-30 08:45:21.5597 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 08:45:21.5597 DEBUG Parameters: @patterncode 
2017-03-30 08:45:21.5717 DEBUG Result 
2017-03-30 08:45:21.6237 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 08:45:21.6237 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 08:45:21.6337 DEBUG Result 
2017-03-30 08:45:21.6337 DEBUG нет шаблона для пользователя
2017-03-30 08:45:21.6337 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 08:45:21.6337 DEBUG Parameters: @patterncode 
2017-03-30 08:45:21.6337 DEBUG Result 
2017-03-30 08:45:22.0947 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-30 08:45:22.0987 DEBUG Получено записей: 9
2017-03-30 08:45:22.1187 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-30 08:45:22.1187 DEBUG Получено записей: 4
2017-03-30 08:45:22.1307 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-30 08:45:22.1307 DEBUG Получено записей: 22
2017-03-30 08:45:22.1457 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-30 08:45:22.1457 DEBUG Получено записей: 3
2017-03-30 08:45:22.1457 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-30 08:45:22.1617 DEBUG Получено записей: 29
2017-03-30 08:45:22.1877 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-30 08:45:22.1907 DEBUG Получено записей: 15
2017-03-30 08:45:22.1907 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 08:45:22.2277 DEBUG Получено записей: 113
2017-03-30 08:45:22.6837 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 08:45:22.6967 DEBUG Получено записей: 113
2017-03-30 08:45:22.7047 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 08:45:22.7047 DEBUG Получено записей: 8
2017-03-30 08:45:22.7047 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 08:45:22.7047 DEBUG Получено записей: 9
2017-03-30 08:45:22.7237 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 08:45:22.7237 DEBUG Получено записей: 176
2017-03-30 08:45:22.7417 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 08:45:22.9678 DEBUG Получено записей: 13813
2017-03-30 08:45:32.2103 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-30 08:45:32.2103 DEBUG Получено записей: 11
2017-03-30 08:45:32.2243 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-30 08:45:32.2243 DEBUG Получено записей: 77
2017-03-30 08:45:32.2823 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-30 08:45:32.2823 DEBUG Получено записей: 107
2017-03-30 08:45:32.5743 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 08:45:32.5883 DEBUG Получено записей: 113
2017-03-30 08:45:43.7449 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-30 08:45:43.7449 DEBUG PatientFindForm OperatorId: 2469
2017-03-30 08:45:43.7449 DEBUG PatientFindForm DoctorId: 2469
2017-03-30 08:45:43.8600 DEBUG DoctorQuery
2017-03-30 08:45:43.8600 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 08:45:43.8600 DEBUG @date: 30.03.2017
2017-03-30 08:45:43.8600 DEBUG @doctor: 2469
2017-03-30 08:45:43.8600 DEBUG bindQueryToDataGrid
2017-03-30 08:45:43.8600 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 08:45:43.8600 DEBUG SqlParams:
2017-03-30 08:45:43.8740 DEBUG SqlParam @date='30.03.2017'
2017-03-30 08:45:43.8740 DEBUG SqlParam @doctor=2469
2017-03-30 08:45:55.0116 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-30 08:45:55.0116 DEBUG SqlParams:
2017-03-30 08:45:55.0116 DEBUG SqlParam @fam=аветян%
2017-03-30 08:45:55.0116 DEBUG SqlParam @nam=мактах%
2017-03-30 08:46:06.1492 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-30 08:46:06.2402 DEBUG Получено записей: 4
2017-03-30 08:46:06.3082 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 08:46:06.3082 DEBUG Получено записей: 0
2017-03-30 08:46:06.3082 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 08:46:06.3342 DEBUG Получено записей: 0
2017-03-30 08:46:06.3722 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-30 08:46:06.4092 DEBUG Получено записей: 82
2017-03-30 08:46:07.3353 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 08:46:07.3393 DEBUG Получено записей: 0
2017-03-30 08:46:07.3743 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 08:46:07.3743 DEBUG Получено записей: 0
2017-03-30 08:46:23.3562 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 08:46:23.3582 DEBUG Получено записей: 1
2017-03-30 08:46:23.4142 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 08:46:23.4142 DEBUG Получено записей: 0
2017-03-30 08:46:23.4872 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-03-30 08:46:23.4872 DEBUG Получено записей: 0
2017-03-30 08:46:23.5042 DEBUG Запрос: SELECT s.name, s.code, c.date_begin, c.date_end, c.cost, e.sp_uslug_id as service_id  FROM eq_uslug_doctor_tab e JOIN eq_uslug_cost_tab c ON c.sp_uslug_id = e.sp_uslug_id AND sp_lpu_id = get_lpu_number()::bigint AND c.sp_kind_paid_id = 0 AND @visitDate::date BETWEEN date_begin AND date_end LEFT JOIN codifiers.sp_uslug_tab s ON s.id = e.sp_uslug_id WHERE e.doctor_id = @doctorId ORDER BY 1,2;
2017-03-30 08:46:23.5162 DEBUG Получено записей: 0
2017-03-30 08:46:23.5162 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls, p.kod_rias FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-03-30 08:46:25.2253 DEBUG Получено записей: 36321
2017-03-30 08:46:59.0443 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 08:46:59.2923 DEBUG Получено записей: 13813
2017-03-30 08:49:22.4055 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 08:49:22.4055 DEBUG Получено записей: 21
2017-03-30 08:49:22.6965 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 08:49:22.6965 DEBUG Получено записей: 3
2017-03-30 08:51:17.7961 DEBUG insert into public.naprav_tab(
                            lpu_id,
                            operator_id,
                            dan_id, 
                            sp_naprav_lpu_id,
                            lpy_from_id,
                            sp_mkb_code,
                            talon_id,
                            date_destination,
                            diagn_id,
                            naprav_number, 
                            opis_diagn,
                            sp_type_napr_id,
                            is_inogorod,
                            from_voenkomat,
                            doctor_id,
                            otdel_code,
                            spec_doctor_id,
                            pay_date,
                            stacionar_date,
                            naprav_year_counter,
                            form_okaz_id,
                            napr_cancel_reason_id,
                            agreeddate,
                            agreedtime,
                            sp_naprav_obosn_id  
                            ) values(
                            @lpu_id,
                            @operator_id,
                            @dan_id,
                            @sp_naprav_lpu_id,
                            @lpu_id_from,
                            @mkb_code,
                            @talon_id,
                            @date_destination,
                            @diagn_id,
                            @naprav_number,
                            @opis_diagn,
                            @refferal_type,
                            @is_inogorod,
                            @from_voenkomat,
                            @doctor_id,
                            @otdel_code,
                            @spec_doctor_id,
                            @pay_date,
                            @stacinar_date,
                            @year_counter,
                            @medform,
                            @cancel,
                            @agreeddate,
                            @agreedtime,
                            @reasonid
                            ) RETURNING id
2017-03-30 08:51:22.7033 DEBUG Result new Id=209979
2017-03-30 14:17:35.0788 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-30 14:17:35.1328 DEBUG Получено записей: 187
2017-03-30 14:17:37.9590 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:17:37.9590 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:17:37.9840 DEBUG Result 
2017-03-30 14:17:37.9840 DEBUG нет шаблона для пользователя
2017-03-30 14:17:37.9840 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:17:37.9840 DEBUG Parameters: @patterncode 
2017-03-30 14:17:37.9960 DEBUG Result 
2017-03-30 14:17:38.0460 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:17:38.0460 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:17:38.0560 DEBUG Result 
2017-03-30 14:17:38.0560 DEBUG нет шаблона для пользователя
2017-03-30 14:17:38.0560 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:17:38.0560 DEBUG Parameters: @patterncode 
2017-03-30 14:17:38.0560 DEBUG Result 
2017-03-30 14:17:38.4580 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-30 14:17:38.4580 DEBUG Получено записей: 9
2017-03-30 14:17:38.4700 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-30 14:17:38.4700 DEBUG Получено записей: 4
2017-03-30 14:17:38.4820 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-30 14:17:38.4820 DEBUG Получено записей: 22
2017-03-30 14:17:38.5110 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-30 14:17:38.5110 DEBUG Получено записей: 3
2017-03-30 14:17:38.5240 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-30 14:17:38.5240 DEBUG Получено записей: 29
2017-03-30 14:17:38.5240 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-30 14:17:38.5420 DEBUG Получено записей: 15
2017-03-30 14:17:38.5420 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:17:38.5800 DEBUG Получено записей: 113
2017-03-30 14:17:38.9240 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 14:17:38.9370 DEBUG Получено записей: 113
2017-03-30 14:17:38.9460 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 14:17:38.9460 DEBUG Получено записей: 8
2017-03-30 14:17:38.9460 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 14:17:38.9460 DEBUG Получено записей: 9
2017-03-30 14:17:38.9680 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 14:17:38.9680 DEBUG Получено записей: 176
2017-03-30 14:17:39.0270 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:17:39.2811 DEBUG Получено записей: 13813
2017-03-30 14:17:45.0924 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-30 14:17:45.0924 DEBUG Получено записей: 11
2017-03-30 14:17:45.0924 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-30 14:17:45.1104 DEBUG Получено записей: 77
2017-03-30 14:17:45.1534 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-30 14:17:45.1594 DEBUG Получено записей: 107
2017-03-30 14:17:45.4024 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:17:45.4144 DEBUG Получено записей: 113
2017-03-30 14:17:53.7079 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-30 14:17:53.7079 DEBUG PatientFindForm OperatorId: 2469
2017-03-30 14:17:53.7079 DEBUG PatientFindForm DoctorId: 2469
2017-03-30 14:17:53.8529 DEBUG DoctorQuery
2017-03-30 14:17:53.8529 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:17:53.8529 DEBUG @date: 30.03.2017
2017-03-30 14:17:53.8529 DEBUG @doctor: 2469
2017-03-30 14:17:53.8529 DEBUG bindQueryToDataGrid
2017-03-30 14:17:53.8699 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:17:53.8699 DEBUG SqlParams:
2017-03-30 14:17:53.8699 DEBUG SqlParam @date='30.03.2017'
2017-03-30 14:17:53.8699 DEBUG SqlParam @doctor=2469
2017-03-30 14:18:07.3967 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-30 14:18:07.3967 DEBUG SqlParams:
2017-03-30 14:18:07.3967 DEBUG SqlParam @fam=аветян%
2017-03-30 14:18:07.3967 DEBUG SqlParam @nam=мактах%
2017-03-30 14:18:12.9710 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-30 14:18:13.0490 DEBUG Получено записей: 4
2017-03-30 14:18:13.1190 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 14:18:13.1190 DEBUG Получено записей: 0
2017-03-30 14:18:13.1290 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 14:18:13.1410 DEBUG Получено записей: 0
2017-03-30 14:18:13.1820 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-30 14:18:13.2310 DEBUG Получено записей: 82
2017-03-30 14:18:13.9890 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 14:18:13.9890 DEBUG Получено записей: 0
2017-03-30 14:18:14.0240 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 14:18:14.0240 DEBUG Получено записей: 0
2017-03-30 14:18:35.7173 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:18:35.9233 DEBUG Получено записей: 13813
2017-03-30 14:18:43.6217 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 14:18:43.6257 DEBUG Получено записей: 21
2017-03-30 14:21:17.5375 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-30 14:21:17.5885 DEBUG Получено записей: 187
2017-03-30 14:21:20.0567 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:21:20.0567 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:21:20.0877 DEBUG Result 
2017-03-30 14:21:20.0877 DEBUG нет шаблона для пользователя
2017-03-30 14:21:20.0877 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:21:20.0877 DEBUG Parameters: @patterncode 
2017-03-30 14:21:20.0997 DEBUG Result 
2017-03-30 14:21:20.1587 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:21:20.1587 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:21:20.1587 DEBUG Result 
2017-03-30 14:21:20.1587 DEBUG нет шаблона для пользователя
2017-03-30 14:21:20.1587 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:21:20.1587 DEBUG Parameters: @patterncode 
2017-03-30 14:21:20.1777 DEBUG Result 
2017-03-30 14:21:20.5457 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-30 14:21:20.5457 DEBUG Получено записей: 9
2017-03-30 14:21:20.5457 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-30 14:21:20.5457 DEBUG Получено записей: 4
2017-03-30 14:21:20.5677 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-30 14:21:20.5677 DEBUG Получено записей: 22
2017-03-30 14:21:20.5967 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-30 14:21:20.5967 DEBUG Получено записей: 3
2017-03-30 14:21:20.6087 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-30 14:21:20.6087 DEBUG Получено записей: 29
2017-03-30 14:21:20.6227 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-30 14:21:20.6227 DEBUG Получено записей: 15
2017-03-30 14:21:20.6227 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:21:20.6597 DEBUG Получено записей: 113
2017-03-30 14:21:20.9857 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 14:21:20.9987 DEBUG Получено записей: 113
2017-03-30 14:21:20.9987 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 14:21:20.9987 DEBUG Получено записей: 8
2017-03-30 14:21:21.0177 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 14:21:21.0177 DEBUG Получено записей: 9
2017-03-30 14:21:21.0297 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 14:21:21.0297 DEBUG Получено записей: 176
2017-03-30 14:21:21.0457 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:21:21.2817 DEBUG Получено записей: 13813
2017-03-30 14:21:29.5792 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-30 14:21:29.5792 DEBUG Получено записей: 11
2017-03-30 14:21:29.5792 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-30 14:21:29.5972 DEBUG Получено записей: 77
2017-03-30 14:21:29.6432 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-30 14:21:29.6432 DEBUG Получено записей: 107
2017-03-30 14:21:29.8952 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:21:29.9092 DEBUG Получено записей: 113
2017-03-30 14:21:38.7347 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-30 14:21:38.7347 DEBUG PatientFindForm OperatorId: 2469
2017-03-30 14:21:38.7347 DEBUG PatientFindForm DoctorId: 2469
2017-03-30 14:21:38.8788 DEBUG DoctorQuery
2017-03-30 14:21:38.8788 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:21:38.8788 DEBUG @date: 30.03.2017
2017-03-30 14:21:38.8788 DEBUG @doctor: 2469
2017-03-30 14:21:38.8788 DEBUG bindQueryToDataGrid
2017-03-30 14:21:38.8938 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:21:38.8938 DEBUG SqlParams:
2017-03-30 14:21:38.8938 DEBUG SqlParam @date='30.03.2017'
2017-03-30 14:21:38.8938 DEBUG SqlParam @doctor=2469
2017-03-30 14:21:49.1843 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-30 14:21:49.1843 DEBUG SqlParams:
2017-03-30 14:21:49.1843 DEBUG SqlParam @fam=аветян%
2017-03-30 14:21:49.1843 DEBUG SqlParam @nam=мактах%
2017-03-30 14:21:53.2056 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-30 14:21:53.2916 DEBUG Получено записей: 4
2017-03-30 14:21:53.3556 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 14:21:53.3556 DEBUG Получено записей: 0
2017-03-30 14:21:53.3556 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 14:21:53.3796 DEBUG Получено записей: 0
2017-03-30 14:21:53.4156 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-30 14:21:53.4156 DEBUG Получено записей: 82
2017-03-30 14:21:54.2076 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 14:21:54.2106 DEBUG Получено записей: 0
2017-03-30 14:21:54.2416 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 14:21:54.2416 DEBUG Получено записей: 0
2017-03-30 14:22:15.9859 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:22:16.2039 DEBUG Получено записей: 13813
2017-03-30 14:22:24.3764 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 14:22:24.3804 DEBUG Получено записей: 21
2017-03-30 14:28:44.4911 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-30 14:28:44.5421 DEBUG Получено записей: 187
2017-03-30 14:28:47.0892 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:28:47.0892 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:28:47.1182 DEBUG Result 
2017-03-30 14:28:47.1182 DEBUG нет шаблона для пользователя
2017-03-30 14:28:47.1182 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:28:47.1182 DEBUG Parameters: @patterncode 
2017-03-30 14:28:47.1313 DEBUG Result 
2017-03-30 14:28:47.1903 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:28:47.1913 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:28:47.1913 DEBUG Result 
2017-03-30 14:28:47.1913 DEBUG нет шаблона для пользователя
2017-03-30 14:28:47.1913 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:28:47.1913 DEBUG Parameters: @patterncode 
2017-03-30 14:28:47.2133 DEBUG Result 
2017-03-30 14:28:47.6233 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-30 14:28:47.6233 DEBUG Получено записей: 9
2017-03-30 14:28:47.6373 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-30 14:28:47.6373 DEBUG Получено записей: 4
2017-03-30 14:28:47.6493 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-30 14:28:47.6493 DEBUG Получено записей: 22
2017-03-30 14:28:47.6653 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-30 14:28:47.6653 DEBUG Получено записей: 3
2017-03-30 14:28:47.6923 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-30 14:28:47.6923 DEBUG Получено записей: 29
2017-03-30 14:28:47.7083 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-30 14:28:47.7083 DEBUG Получено записей: 15
2017-03-30 14:28:47.7083 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:28:47.7483 DEBUG Получено записей: 113
2017-03-30 14:28:48.1153 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 14:28:48.1283 DEBUG Получено записей: 113
2017-03-30 14:28:48.1283 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 14:28:48.1283 DEBUG Получено записей: 8
2017-03-30 14:28:48.1503 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 14:28:48.1503 DEBUG Получено записей: 9
2017-03-30 14:28:48.1623 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 14:28:48.1623 DEBUG Получено записей: 176
2017-03-30 14:28:48.1813 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:28:48.4353 DEBUG Получено записей: 13813
2017-03-30 14:28:54.3437 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-30 14:28:54.3437 DEBUG Получено записей: 11
2017-03-30 14:28:54.3597 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-30 14:28:54.3597 DEBUG Получено записей: 77
2017-03-30 14:28:54.4207 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-30 14:28:54.4307 DEBUG Получено записей: 107
2017-03-30 14:28:54.6737 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:28:54.6867 DEBUG Получено записей: 113
2017-03-30 14:29:01.3761 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-30 14:29:01.3761 DEBUG PatientFindForm OperatorId: 2469
2017-03-30 14:29:01.3761 DEBUG PatientFindForm DoctorId: 2469
2017-03-30 14:29:01.5211 DEBUG DoctorQuery
2017-03-30 14:29:01.5211 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:29:01.5211 DEBUG @date: 30.03.2017
2017-03-30 14:29:01.5211 DEBUG @doctor: 2469
2017-03-30 14:29:01.5211 DEBUG bindQueryToDataGrid
2017-03-30 14:29:01.5431 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:29:01.5431 DEBUG SqlParams:
2017-03-30 14:29:01.5451 DEBUG SqlParam @date='30.03.2017'
2017-03-30 14:29:01.5451 DEBUG SqlParam @doctor=2469
2017-03-30 14:29:12.5667 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-30 14:29:12.5667 DEBUG SqlParams:
2017-03-30 14:29:12.5667 DEBUG SqlParam @fam=аветян%
2017-03-30 14:29:12.5667 DEBUG SqlParam @nam=мактах%
2017-03-30 14:29:17.2260 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-30 14:29:17.3060 DEBUG Получено записей: 4
2017-03-30 14:29:17.3720 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 14:29:17.3720 DEBUG Получено записей: 0
2017-03-30 14:29:17.3830 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 14:29:17.3950 DEBUG Получено записей: 0
2017-03-30 14:29:17.4380 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-30 14:29:17.4510 DEBUG Получено записей: 82
2017-03-30 14:29:18.2750 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 14:29:18.2750 DEBUG Получено записей: 0
2017-03-30 14:29:18.3100 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 14:29:18.3140 DEBUG Получено записей: 0
2017-03-30 14:29:38.1862 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:29:38.4012 DEBUG Получено записей: 13813
2017-03-30 14:29:46.2816 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 14:29:46.2866 DEBUG Получено записей: 21
2017-03-30 14:35:35.5206 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-30 14:35:35.5706 DEBUG Получено записей: 187
2017-03-30 14:35:38.1048 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:35:38.1048 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:35:38.1338 DEBUG Result 
2017-03-30 14:35:38.1338 DEBUG нет шаблона для пользователя
2017-03-30 14:35:38.1338 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:35:38.1338 DEBUG Parameters: @patterncode 
2017-03-30 14:35:38.1468 DEBUG Result 
2017-03-30 14:35:38.2038 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:35:38.2038 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:35:38.2158 DEBUG Result 
2017-03-30 14:35:38.2158 DEBUG нет шаблона для пользователя
2017-03-30 14:35:38.2158 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:35:38.2158 DEBUG Parameters: @patterncode 
2017-03-30 14:35:38.2278 DEBUG Result 
2017-03-30 14:35:38.6108 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-30 14:35:38.6148 DEBUG Получено записей: 9
2017-03-30 14:35:38.6148 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-30 14:35:38.6148 DEBUG Получено записей: 4
2017-03-30 14:35:38.6348 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-30 14:35:38.6348 DEBUG Получено записей: 22
2017-03-30 14:35:38.6508 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-30 14:35:38.6668 DEBUG Получено записей: 3
2017-03-30 14:35:38.6768 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-30 14:35:38.6768 DEBUG Получено записей: 29
2017-03-30 14:35:38.6928 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-30 14:35:38.6928 DEBUG Получено записей: 15
2017-03-30 14:35:38.6928 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:35:38.7318 DEBUG Получено записей: 113
2017-03-30 14:35:39.0778 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 14:35:39.0918 DEBUG Получено записей: 113
2017-03-30 14:35:39.1018 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 14:35:39.1018 DEBUG Получено записей: 8
2017-03-30 14:35:39.1128 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 14:35:39.1128 DEBUG Получено записей: 9
2017-03-30 14:35:39.1128 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 14:35:39.1328 DEBUG Получено записей: 176
2017-03-30 14:35:39.1438 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:35:39.3758 DEBUG Получено записей: 13813
2017-03-30 14:35:45.0582 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-30 14:35:45.0582 DEBUG Получено записей: 11
2017-03-30 14:35:45.0582 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-30 14:35:45.0752 DEBUG Получено записей: 77
2017-03-30 14:35:45.1132 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-30 14:35:45.1202 DEBUG Получено записей: 107
2017-03-30 14:35:45.3622 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:35:45.3732 DEBUG Получено записей: 113
2017-03-30 14:35:50.9635 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-30 14:35:50.9635 DEBUG PatientFindForm OperatorId: 2469
2017-03-30 14:35:50.9635 DEBUG PatientFindForm DoctorId: 2469
2017-03-30 14:35:51.1085 DEBUG DoctorQuery
2017-03-30 14:35:51.1085 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:35:51.1085 DEBUG @date: 30.03.2017
2017-03-30 14:35:51.1085 DEBUG @doctor: 2469
2017-03-30 14:35:51.1085 DEBUG bindQueryToDataGrid
2017-03-30 14:35:51.1305 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:35:51.1305 DEBUG SqlParams:
2017-03-30 14:35:51.1305 DEBUG SqlParam @date='30.03.2017'
2017-03-30 14:35:51.1305 DEBUG SqlParam @doctor=2469
2017-03-30 14:36:06.2664 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-30 14:36:06.2664 DEBUG SqlParams:
2017-03-30 14:36:06.2664 DEBUG SqlParam @fam=вахрушкина%
2017-03-30 14:36:06.2664 DEBUG SqlParam @nam=алевтина%
2017-03-30 14:36:10.9396 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-30 14:36:11.0276 DEBUG Получено записей: 4
2017-03-30 14:36:11.1156 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 14:36:11.1156 DEBUG Получено записей: 1
2017-03-30 14:36:11.1496 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 14:36:11.1786 DEBUG Получено записей: 0
2017-03-30 14:36:11.2467 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-30 14:36:11.2877 DEBUG Получено записей: 493
2017-03-30 14:36:16.0589 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 14:36:16.0589 DEBUG Получено записей: 1
2017-03-30 14:36:16.1379 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 14:36:16.1379 DEBUG Получено записей: 1
2017-03-30 14:36:39.1642 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:36:39.3813 DEBUG Получено записей: 13813
2017-03-30 14:37:25.6939 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 14:37:25.6939 DEBUG Получено записей: 0
2017-03-30 14:38:01.6010 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 14:38:01.6060 DEBUG Получено записей: 1
2017-03-30 14:38:01.6360 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 14:38:01.6640 DEBUG Получено записей: 0
2017-03-30 14:41:02.2733 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-30 14:41:02.3193 DEBUG Получено записей: 187
2017-03-30 14:41:04.7194 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:41:04.7194 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:41:04.7484 DEBUG Result 
2017-03-30 14:41:04.7484 DEBUG нет шаблона для пользователя
2017-03-30 14:41:04.7484 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:41:04.7484 DEBUG Parameters: @patterncode 
2017-03-30 14:41:04.7484 DEBUG Result 
2017-03-30 14:41:04.8124 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 14:41:04.8124 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 14:41:04.8124 DEBUG Result 
2017-03-30 14:41:04.8124 DEBUG нет шаблона для пользователя
2017-03-30 14:41:04.8124 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 14:41:04.8124 DEBUG Parameters: @patterncode 
2017-03-30 14:41:04.8344 DEBUG Result 
2017-03-30 14:41:05.2175 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-30 14:41:05.2175 DEBUG Получено записей: 9
2017-03-30 14:41:05.2175 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-30 14:41:05.2175 DEBUG Получено записей: 4
2017-03-30 14:41:05.2395 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-30 14:41:05.2395 DEBUG Получено записей: 22
2017-03-30 14:41:05.2535 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-30 14:41:05.2685 DEBUG Получено записей: 3
2017-03-30 14:41:05.2795 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-30 14:41:05.2795 DEBUG Получено записей: 29
2017-03-30 14:41:05.2955 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-30 14:41:05.2955 DEBUG Получено записей: 15
2017-03-30 14:41:05.2955 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:41:05.3355 DEBUG Получено записей: 113
2017-03-30 14:41:05.6685 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 14:41:05.6815 DEBUG Получено записей: 113
2017-03-30 14:41:05.6915 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 14:41:05.6915 DEBUG Получено записей: 8
2017-03-30 14:41:05.7025 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 14:41:05.7025 DEBUG Получено записей: 9
2017-03-30 14:41:05.7155 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 14:41:05.7155 DEBUG Получено записей: 176
2017-03-30 14:41:05.7345 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:41:05.9605 DEBUG Получено записей: 13813
2017-03-30 14:41:22.5395 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-30 14:41:22.5395 DEBUG Получено записей: 11
2017-03-30 14:41:22.5585 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-30 14:41:22.5655 DEBUG Получено записей: 77
2017-03-30 14:41:22.6205 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-30 14:41:22.6285 DEBUG Получено записей: 107
2017-03-30 14:41:22.8805 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 14:41:22.8955 DEBUG Получено записей: 113
2017-03-30 14:41:28.9098 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-30 14:41:28.9098 DEBUG PatientFindForm OperatorId: 2469
2017-03-30 14:41:28.9098 DEBUG PatientFindForm DoctorId: 2469
2017-03-30 14:41:30.8699 DEBUG DoctorQuery
2017-03-30 14:41:30.8699 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:41:30.8699 DEBUG @date: 30.03.2017
2017-03-30 14:41:30.8699 DEBUG @doctor: 2469
2017-03-30 14:41:30.8699 DEBUG bindQueryToDataGrid
2017-03-30 14:41:30.8859 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 14:41:30.8859 DEBUG SqlParams:
2017-03-30 14:41:30.8859 DEBUG SqlParam @date='30.03.2017'
2017-03-30 14:41:30.8859 DEBUG SqlParam @doctor=2469
2017-03-30 14:41:44.7387 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-30 14:41:44.7387 DEBUG SqlParams:
2017-03-30 14:41:44.7387 DEBUG SqlParam @fam=вахрушкина%
2017-03-30 14:41:44.7387 DEBUG SqlParam @nam=алевтина%
2017-03-30 14:41:48.4109 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-30 14:41:48.4879 DEBUG Получено записей: 4
2017-03-30 14:41:48.5729 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 14:41:48.5729 DEBUG Получено записей: 1
2017-03-30 14:41:48.6039 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 14:41:48.6299 DEBUG Получено записей: 0
2017-03-30 14:41:48.6840 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-30 14:41:48.7210 DEBUG Получено записей: 493
2017-03-30 14:41:52.9642 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 14:41:52.9642 DEBUG Получено записей: 1
2017-03-30 14:41:53.0412 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 14:41:53.0412 DEBUG Получено записей: 1
2017-03-30 14:42:23.6570 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 14:42:23.8660 DEBUG Получено записей: 13813
2017-03-30 14:42:34.4786 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 14:42:34.4826 DEBUG Получено записей: 0
2017-03-30 14:42:41.1250 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 14:42:41.1290 DEBUG Получено записей: 1
2017-03-30 14:42:41.1590 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 14:42:41.1850 DEBUG Получено записей: 0
2017-03-30 16:24:05.5900 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-30 16:24:05.6460 DEBUG Получено записей: 187
2017-03-30 16:24:08.1151 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 16:24:08.1151 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 16:24:08.1461 DEBUG Result 
2017-03-30 16:24:08.1461 DEBUG нет шаблона для пользователя
2017-03-30 16:24:08.1461 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 16:24:08.1461 DEBUG Parameters: @patterncode 
2017-03-30 16:24:08.1611 DEBUG Result 
2017-03-30 16:24:08.2181 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 16:24:08.2181 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 16:24:08.2301 DEBUG Result 
2017-03-30 16:24:08.2301 DEBUG нет шаблона для пользователя
2017-03-30 16:24:08.2301 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 16:24:08.2301 DEBUG Parameters: @patterncode 
2017-03-30 16:24:08.2421 DEBUG Result 
2017-03-30 16:24:08.6381 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-30 16:24:08.6381 DEBUG Получено записей: 9
2017-03-30 16:24:08.6531 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-30 16:24:08.6531 DEBUG Получено записей: 4
2017-03-30 16:24:08.6651 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-30 16:24:08.6651 DEBUG Получено записей: 22
2017-03-30 16:24:08.6811 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-30 16:24:08.6811 DEBUG Получено записей: 3
2017-03-30 16:24:08.7091 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-30 16:24:08.7091 DEBUG Получено записей: 29
2017-03-30 16:24:08.7261 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-30 16:24:08.7261 DEBUG Получено записей: 15
2017-03-30 16:24:08.7391 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 16:24:08.7671 DEBUG Получено записей: 113
2017-03-30 16:24:09.1032 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 16:24:09.1192 DEBUG Получено записей: 113
2017-03-30 16:24:09.1772 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 16:24:09.1772 DEBUG Получено записей: 8
2017-03-30 16:24:09.1772 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 16:24:09.1922 DEBUG Получено записей: 9
2017-03-30 16:24:09.1922 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 16:24:09.2072 DEBUG Получено записей: 176
2017-03-30 16:24:09.2072 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:24:09.4542 DEBUG Получено записей: 13813
2017-03-30 16:24:16.5876 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-30 16:24:16.5876 DEBUG Получено записей: 11
2017-03-30 16:24:16.6026 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-30 16:24:16.6026 DEBUG Получено записей: 77
2017-03-30 16:24:16.6606 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-30 16:24:16.6686 DEBUG Получено записей: 107
2017-03-30 16:24:16.9356 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 16:24:16.9486 DEBUG Получено записей: 113
2017-03-30 16:24:23.8200 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-30 16:24:23.8200 DEBUG PatientFindForm OperatorId: 2469
2017-03-30 16:24:23.8200 DEBUG PatientFindForm DoctorId: 2469
2017-03-30 16:24:23.9580 DEBUG DoctorQuery
2017-03-30 16:24:23.9580 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 16:24:23.9580 DEBUG @date: 30.03.2017
2017-03-30 16:24:23.9580 DEBUG @doctor: 2469
2017-03-30 16:24:23.9580 DEBUG bindQueryToDataGrid
2017-03-30 16:24:23.9780 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 16:24:23.9790 DEBUG SqlParams:
2017-03-30 16:24:23.9790 DEBUG SqlParam @date='30.03.2017'
2017-03-30 16:24:23.9790 DEBUG SqlParam @doctor=2469
2017-03-30 16:24:36.5157 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-30 16:24:36.5157 DEBUG SqlParams:
2017-03-30 16:24:36.5157 DEBUG SqlParam @fam=аветян%
2017-03-30 16:24:36.5157 DEBUG SqlParam @nam=мактах%
2017-03-30 16:24:40.8830 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-30 16:24:40.9670 DEBUG Получено записей: 4
2017-03-30 16:24:41.0390 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 16:24:41.0520 DEBUG Получено записей: 0
2017-03-30 16:24:41.0610 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 16:24:41.0770 DEBUG Получено записей: 0
2017-03-30 16:24:41.1220 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-30 16:24:41.1540 DEBUG Получено записей: 82
2017-03-30 16:24:42.0150 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 16:24:42.0150 DEBUG Получено записей: 0
2017-03-30 16:24:42.0500 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 16:24:42.0500 DEBUG Получено записей: 0
2017-03-30 16:25:06.6975 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:25:06.9045 DEBUG Получено записей: 13813
2017-03-30 16:25:16.7930 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:25:16.7930 DEBUG Получено записей: 0
2017-03-30 16:25:33.5530 DEBUG insert into public.naprav_tab(
                            lpu_id,
                            operator_id,
                            dan_id, 
                            sp_naprav_lpu_id,
                            lpy_from_id,
                            sp_mkb_code,
                            talon_id,
                            date_destination,
                            diagn_id,
                            naprav_number, 
                            opis_diagn,
                            sp_type_napr_id,
                            is_inogorod,
                            from_voenkomat,
                            doctor_id,
                            otdel_code,
                            spec_doctor_id,
                            pay_date,
                            stacionar_date,
                            naprav_year_counter,
                            form_okaz_id,
                            napr_cancel_reason_id,
                            agreeddate,
                            agreedtime,
                            sp_naprav_obosn_id  
                            ) values(
                            @lpu_id,
                            @operator_id,
                            @dan_id,
                            @sp_naprav_lpu_id,
                            @lpu_id_from,
                            @mkb_code,
                            @talon_id,
                            @date_destination,
                            @diagn_id,
                            @naprav_number,
                            @opis_diagn,
                            @refferal_type,
                            @is_inogorod,
                            @from_voenkomat,
                            @doctor_id,
                            @otdel_code,
                            @spec_doctor_id,
                            @pay_date,
                            @stacinar_date,
                            @year_counter,
                            @medform,
                            @cancel,
                            @agreeddate,
                            @agreedtime,
                            @reasonid
                            ) RETURNING id
2017-03-30 16:25:36.5192 DEBUG Result new Id=210117
2017-03-30 16:25:57.7334 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 16:25:57.7374 DEBUG Получено записей: 0
2017-03-30 16:25:57.7374 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 16:25:57.7554 DEBUG Получено записей: 0
2017-03-30 16:25:57.7554 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 16:25:57.7664 DEBUG Получено записей: 0
2017-03-30 16:25:57.7664 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 16:25:57.7854 DEBUG Получено записей: 0
2017-03-30 16:26:41.7839 DEBUG insert into public.naprav_tab(
                            lpu_id,
                            operator_id,
                            dan_id, 
                            sp_naprav_lpu_id,
                            lpy_from_id,
                            sp_mkb_code,
                            talon_id,
                            date_destination,
                            diagn_id,
                            naprav_number, 
                            opis_diagn,
                            sp_type_napr_id,
                            is_inogorod,
                            from_voenkomat,
                            doctor_id,
                            otdel_code,
                            spec_doctor_id,
                            pay_date,
                            stacionar_date,
                            naprav_year_counter,
                            form_okaz_id,
                            napr_cancel_reason_id,
                            agreeddate,
                            agreedtime,
                            sp_naprav_obosn_id  
                            ) values(
                            @lpu_id,
                            @operator_id,
                            @dan_id,
                            @sp_naprav_lpu_id,
                            @lpu_id_from,
                            @mkb_code,
                            @talon_id,
                            @date_destination,
                            @diagn_id,
                            @naprav_number,
                            @opis_diagn,
                            @refferal_type,
                            @is_inogorod,
                            @from_voenkomat,
                            @doctor_id,
                            @otdel_code,
                            @spec_doctor_id,
                            @pay_date,
                            @stacinar_date,
                            @year_counter,
                            @medform,
                            @cancel,
                            @agreeddate,
                            @agreedtime,
                            @reasonid
                            ) RETURNING id
2017-03-30 16:26:45.5491 DEBUG Result new Id=210118
2017-03-30 16:29:58.6592 DEBUG insert into public.naprav_tab(
                            lpu_id,
                            operator_id,
                            dan_id, 
                            sp_naprav_lpu_id,
                            lpy_from_id,
                            sp_mkb_code,
                            talon_id,
                            date_destination,
                            diagn_id,
                            naprav_number, 
                            opis_diagn,
                            sp_type_napr_id,
                            is_inogorod,
                            from_voenkomat,
                            doctor_id,
                            otdel_code,
                            spec_doctor_id,
                            pay_date,
                            stacionar_date,
                            naprav_year_counter,
                            form_okaz_id,
                            napr_cancel_reason_id,
                            agreeddate,
                            agreedtime,
                            sp_naprav_obosn_id  
                            ) values(
                            @lpu_id,
                            @operator_id,
                            @dan_id,
                            @sp_naprav_lpu_id,
                            @lpu_id_from,
                            @mkb_code,
                            @talon_id,
                            @date_destination,
                            @diagn_id,
                            @naprav_number,
                            @opis_diagn,
                            @refferal_type,
                            @is_inogorod,
                            @from_voenkomat,
                            @doctor_id,
                            @otdel_code,
                            @spec_doctor_id,
                            @pay_date,
                            @stacinar_date,
                            @year_counter,
                            @medform,
                            @cancel,
                            @agreeddate,
                            @agreedtime,
                            @reasonid
                            ) RETURNING id
2017-03-30 16:30:16.9122 DEBUG Result new Id=210120
2017-03-30 16:31:16.4226 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:31:16.6236 DEBUG Получено записей: 13813
2017-03-30 16:31:52.1767 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:31:52.1767 DEBUG Получено записей: 21
2017-03-30 16:32:26.5396 DEBUG insert into public.naprav_tab(
                            lpu_id,
                            operator_id,
                            dan_id, 
                            sp_naprav_lpu_id,
                            lpy_from_id,
                            sp_mkb_code,
                            talon_id,
                            date_destination,
                            diagn_id,
                            naprav_number, 
                            opis_diagn,
                            sp_type_napr_id,
                            is_inogorod,
                            from_voenkomat,
                            doctor_id,
                            otdel_code,
                            spec_doctor_id,
                            pay_date,
                            stacionar_date,
                            naprav_year_counter,
                            form_okaz_id,
                            napr_cancel_reason_id,
                            agreeddate,
                            agreedtime,
                            sp_naprav_obosn_id  
                            ) values(
                            @lpu_id,
                            @operator_id,
                            @dan_id,
                            @sp_naprav_lpu_id,
                            @lpu_id_from,
                            @mkb_code,
                            @talon_id,
                            @date_destination,
                            @diagn_id,
                            @naprav_number,
                            @opis_diagn,
                            @refferal_type,
                            @is_inogorod,
                            @from_voenkomat,
                            @doctor_id,
                            @otdel_code,
                            @spec_doctor_id,
                            @pay_date,
                            @stacinar_date,
                            @year_counter,
                            @medform,
                            @cancel,
                            @agreeddate,
                            @agreedtime,
                            @reasonid
                            ) RETURNING id
2017-03-30 16:32:32.4250 DEBUG Result new Id=210121
2017-03-30 16:33:16.3225 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:33:16.5105 DEBUG Получено записей: 13813
2017-03-30 16:33:32.4424 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:33:32.4424 DEBUG Получено записей: 21
2017-03-30 16:40:05.7899 DEBUG insert into public.naprav_tab(
                            lpu_id,
                            operator_id,
                            dan_id, 
                            sp_naprav_lpu_id,
                            lpy_from_id,
                            sp_mkb_code,
                            talon_id,
                            date_destination,
                            diagn_id,
                            naprav_number, 
                            opis_diagn,
                            sp_type_napr_id,
                            is_inogorod,
                            from_voenkomat,
                            doctor_id,
                            otdel_code,
                            spec_doctor_id,
                            pay_date,
                            stacionar_date,
                            naprav_year_counter,
                            form_okaz_id,
                            napr_cancel_reason_id,
                            agreeddate,
                            agreedtime,
                            sp_naprav_obosn_id  
                            ) values(
                            @lpu_id,
                            @operator_id,
                            @dan_id,
                            @sp_naprav_lpu_id,
                            @lpu_id_from,
                            @mkb_code,
                            @talon_id,
                            @date_destination,
                            @diagn_id,
                            @naprav_number,
                            @opis_diagn,
                            @refferal_type,
                            @is_inogorod,
                            @from_voenkomat,
                            @doctor_id,
                            @otdel_code,
                            @spec_doctor_id,
                            @pay_date,
                            @stacinar_date,
                            @year_counter,
                            @medform,
                            @cancel,
                            @agreeddate,
                            @agreedtime,
                            @reasonid
                            ) RETURNING id
2017-03-30 16:40:12.7423 DEBUG Result new Id=210125
2017-03-30 16:42:12.8482 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:42:13.0012 DEBUG Получено записей: 13813
2017-03-30 16:43:57.6491 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:43:57.6531 DEBUG Получено записей: 21
2017-03-30 16:47:15.5215 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:47:15.7185 DEBUG Получено записей: 13813
2017-03-30 16:47:16.0945 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 16:47:16.0945 DEBUG Получено записей: 176
2017-03-30 16:47:46.5662 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:47:46.5702 DEBUG Получено записей: 21
2017-03-30 16:48:48.5498 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:48:48.7728 DEBUG Получено записей: 13813
2017-03-30 16:48:49.1008 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:48:49.1008 DEBUG Получено записей: 21
2017-03-30 16:52:35.7338 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:52:35.9198 DEBUG Получено записей: 13813
2017-03-30 16:52:36.2678 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:52:36.2678 DEBUG Получено записей: 21
2017-03-30 16:53:40.6155 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:53:40.8025 DEBUG Получено записей: 13813
2017-03-30 16:53:41.1425 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:53:41.1675 DEBUG Получено записей: 21
2017-03-30 16:54:32.2604 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:54:32.4535 DEBUG Получено записей: 13813
2017-03-30 16:54:32.4715 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:54:32.6665 DEBUG Получено записей: 13813
2017-03-30 16:54:32.9495 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 16:54:32.9625 DEBUG Получено записей: 113
2017-03-30 16:54:32.9705 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 16:54:32.9705 DEBUG Получено записей: 8
2017-03-30 16:54:33.0375 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 16:54:33.0375 DEBUG Получено записей: 9
2017-03-30 16:54:33.0745 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:54:33.0785 DEBUG Получено записей: 21
2017-03-30 16:55:22.1103 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:55:22.3253 DEBUG Получено записей: 13813
2017-03-30 16:55:22.6203 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:55:22.6253 DEBUG Получено записей: 21
2017-03-30 16:55:53.0261 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 16:55:53.2571 DEBUG Получено записей: 13813
2017-03-30 16:55:53.5601 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 16:55:53.5601 DEBUG Получено записей: 21
2017-03-30 17:12:05.2667 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-03-30 17:12:05.3197 DEBUG Получено записей: 187
2017-03-30 17:12:07.7368 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 17:12:07.7368 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 17:12:07.7678 DEBUG Result 
2017-03-30 17:12:07.7678 DEBUG нет шаблона для пользователя
2017-03-30 17:12:07.7678 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 17:12:07.7678 DEBUG Parameters: @patterncode 
2017-03-30 17:12:07.7678 DEBUG Result 
2017-03-30 17:12:07.8328 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-03-30 17:12:07.8328 DEBUG Parameters: @patterncode=, @operator=
2017-03-30 17:12:07.8448 DEBUG Result 
2017-03-30 17:12:07.8448 DEBUG нет шаблона для пользователя
2017-03-30 17:12:07.8448 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-03-30 17:12:07.8448 DEBUG Parameters: @patterncode 
2017-03-30 17:12:07.8448 DEBUG Result 
2017-03-30 17:12:08.2618 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-03-30 17:12:08.2618 DEBUG Получено записей: 9
2017-03-30 17:12:08.2738 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-03-30 17:12:08.2738 DEBUG Получено записей: 4
2017-03-30 17:12:08.2858 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-03-30 17:12:08.2858 DEBUG Получено записей: 22
2017-03-30 17:12:08.3038 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-03-30 17:12:08.3038 DEBUG Получено записей: 3
2017-03-30 17:12:08.3318 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-03-30 17:12:08.3318 DEBUG Получено записей: 29
2017-03-30 17:12:08.3488 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-03-30 17:12:08.3488 DEBUG Получено записей: 15
2017-03-30 17:12:08.3628 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 17:12:08.3909 DEBUG Получено записей: 113
2017-03-30 17:12:08.7439 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-03-30 17:12:08.7579 DEBUG Получено записей: 113
2017-03-30 17:12:08.7689 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-03-30 17:12:08.7689 DEBUG Получено записей: 8
2017-03-30 17:12:08.7819 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-03-30 17:12:08.7819 DEBUG Получено записей: 9
2017-03-30 17:12:08.7819 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-03-30 17:12:08.8009 DEBUG Получено записей: 176
2017-03-30 17:12:08.8129 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 17:12:09.0489 DEBUG Получено записей: 13813
2017-03-30 17:12:14.1162 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-03-30 17:12:14.1162 DEBUG Получено записей: 11
2017-03-30 17:12:14.1162 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-03-30 17:12:14.1352 DEBUG Получено записей: 77
2017-03-30 17:12:14.1872 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-03-30 17:12:14.1942 DEBUG Получено записей: 107
2017-03-30 17:12:14.4392 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-03-30 17:12:14.4532 DEBUG Получено записей: 113
2017-03-30 17:12:20.9936 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-03-30 17:12:20.9936 DEBUG PatientFindForm OperatorId: 2469
2017-03-30 17:12:20.9956 DEBUG PatientFindForm DoctorId: 2469
2017-03-30 17:12:21.1346 DEBUG DoctorQuery
2017-03-30 17:12:21.1346 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 17:12:21.1346 DEBUG @date: 30.03.2017
2017-03-30 17:12:21.1346 DEBUG @doctor: 2469
2017-03-30 17:12:21.1366 DEBUG bindQueryToDataGrid
2017-03-30 17:12:21.1366 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-03-30 17:12:21.1366 DEBUG SqlParams:
2017-03-30 17:12:21.1366 DEBUG SqlParam @date='30.03.2017'
2017-03-30 17:12:21.1366 DEBUG SqlParam @doctor=2469
2017-03-30 17:12:32.9783 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-03-30 17:12:32.9783 DEBUG SqlParams:
2017-03-30 17:12:32.9783 DEBUG SqlParam @fam=аветян%
2017-03-30 17:12:32.9783 DEBUG SqlParam @nam=мактах%
2017-03-30 17:12:37.3665 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-03-30 17:12:37.4435 DEBUG Получено записей: 4
2017-03-30 17:12:37.5085 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 17:12:37.5085 DEBUG Получено записей: 0
2017-03-30 17:12:37.5195 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 17:12:37.5195 DEBUG Получено записей: 0
2017-03-30 17:12:37.5715 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-03-30 17:12:37.5975 DEBUG Получено записей: 82
2017-03-30 17:12:38.4026 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-03-30 17:12:38.4066 DEBUG Получено записей: 0
2017-03-30 17:12:38.4376 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-03-30 17:12:38.4376 DEBUG Получено записей: 0
2017-03-30 17:12:58.0277 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 17:12:58.2177 DEBUG Получено записей: 13813
2017-03-30 17:13:00.3978 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 17:13:00.4018 DEBUG Получено записей: 21
2017-03-30 17:13:43.1423 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-03-30 17:13:43.3713 DEBUG Получено записей: 13813
2017-03-30 17:13:45.5124 DEBUG Запрос: select id, code, name from codifiers.sp_lpu_otdels_tab where pricpol = @code and name not like '*%' order by 3;
2017-03-30 17:13:45.5124 DEBUG Получено записей: 21
2017-03-30 17:14:11.7729 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 17:14:11.7729 DEBUG Получено записей: 0
2017-03-30 17:14:11.7729 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 17:14:11.7949 DEBUG Получено записей: 0
2017-03-30 17:14:11.7949 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-03-30 17:14:11.8049 DEBUG Получено записей: 0
2017-03-30 17:14:11.8049 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-03-30 17:14:11.8229 DEBUG Получено записей: 0
