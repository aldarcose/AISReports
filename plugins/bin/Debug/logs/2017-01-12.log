2017-01-12 08:16:24.1466 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 08:16:24.2067 DEBUG Получено записей: 1
2017-01-12 08:19:03.7068 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 08:19:03.7508 DEBUG Получено записей: 0
2017-01-12 08:19:10.4012 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 08:19:10.4012 DEBUG Получено записей: 11
2017-01-12 08:19:10.4172 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 08:19:10.4172 DEBUG Получено записей: 75
2017-01-12 08:19:10.4742 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 08:19:10.4802 DEBUG Получено записей: 0
2017-01-12 08:20:16.4439 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 08:20:16.4889 DEBUG Получено записей: 1
2017-01-12 08:22:38.3331 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 08:22:38.3781 DEBUG Получено записей: 1
2017-01-12 08:22:44.2424 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 08:22:44.2444 DEBUG Получено записей: 11
2017-01-12 08:22:44.3064 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 08:22:44.3064 DEBUG Получено записей: 75
2017-01-12 08:22:44.3574 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 08:22:44.3574 DEBUG Получено записей: 0
2017-01-12 08:22:54.1140 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where doc.expiration_date>@Date  order by 2
2017-01-12 08:33:27.7642 ERROR Cannot open connection: Failed to establish a connection to '192.168.16.253'.
2017-01-12 08:36:28.6035 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 08:36:28.6525 DEBUG Получено записей: 1
2017-01-12 08:36:52.6039 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 08:36:52.6039 DEBUG Получено записей: 11
2017-01-12 08:36:52.6259 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 08:36:52.6259 DEBUG Получено записей: 75
2017-01-12 08:36:52.6869 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 08:36:52.6869 DEBUG Получено записей: 0
2017-01-12 08:37:02.2675 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 08:47:44.2842 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 08:47:44.3242 DEBUG Получено записей: 1
2017-01-12 08:47:50.2755 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 08:47:50.2775 DEBUG Получено записей: 11
2017-01-12 08:47:50.3395 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 08:47:50.3565 DEBUG Получено записей: 75
2017-01-12 08:47:50.4085 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 08:47:50.4085 DEBUG Получено записей: 0
2017-01-12 08:48:00.2191 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 08:48:12.5408 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where  order by 2
2017-01-12 08:51:24.2398 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 08:51:24.2868 DEBUG Получено записей: 1
2017-01-12 08:51:31.2852 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 08:51:31.2852 DEBUG Получено записей: 11
2017-01-12 08:51:31.3012 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 08:51:31.3012 DEBUG Получено записей: 75
2017-01-12 08:51:31.3612 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 08:51:31.3652 DEBUG Получено записей: 0
2017-01-12 08:51:46.6050 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 08:51:58.1527 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             order by 2
2017-01-12 08:52:04.3211 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 08:52:06.4572 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             order by 2
2017-01-12 08:52:07.9843 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 08:52:24.5402 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 08:55:35.7462 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 08:55:35.7932 DEBUG Получено записей: 1
2017-01-12 08:55:41.7275 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 08:55:41.7275 DEBUG Получено записей: 11
2017-01-12 08:55:41.7435 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 08:55:41.7435 DEBUG Получено записей: 75
2017-01-12 08:55:41.8045 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 08:55:41.8085 DEBUG Получено записей: 0
2017-01-12 08:56:01.1696 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.id = doc.users_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 09:08:51.2937 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 09:08:51.3437 DEBUG Получено записей: 1
2017-01-12 09:09:20.7373 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 09:09:20.7373 DEBUG Получено записей: 11
2017-01-12 09:09:20.7533 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 09:09:20.7533 DEBUG Получено записей: 75
2017-01-12 09:09:20.8173 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 09:09:20.8173 DEBUG Получено записей: 0
2017-01-12 09:09:39.1654 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.dan_id = dan.dan_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 09:10:33.3375 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.dan_id = dan.dan_id
                             order by 2
2017-01-12 10:19:16.7453 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 10:19:16.7973 DEBUG Получено записей: 187
2017-01-12 10:19:19.7555 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 10:19:19.7555 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 10:19:19.8015 DEBUG Result 
2017-01-12 10:19:19.8015 DEBUG нет шаблона для пользователя
2017-01-12 10:19:19.8015 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 10:19:19.8015 DEBUG Parameters: @patterncode 
2017-01-12 10:19:19.8145 DEBUG Result 
2017-01-12 10:19:19.8675 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 10:19:19.8675 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 10:19:19.8775 DEBUG Result 
2017-01-12 10:19:19.8775 DEBUG нет шаблона для пользователя
2017-01-12 10:19:19.8775 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 10:19:19.8775 DEBUG Parameters: @patterncode 
2017-01-12 10:19:19.8775 DEBUG Result 
2017-01-12 10:19:20.3445 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-12 10:19:20.3445 DEBUG Получено записей: 9
2017-01-12 10:19:20.3585 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-12 10:19:20.3585 DEBUG Получено записей: 4
2017-01-12 10:19:20.3585 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-12 10:19:20.3765 DEBUG Получено записей: 22
2017-01-12 10:19:20.3765 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-12 10:19:20.3765 DEBUG Получено записей: 3
2017-01-12 10:19:20.3985 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-12 10:19:20.4185 DEBUG Получено записей: 29
2017-01-12 10:19:20.4305 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-12 10:19:20.4305 DEBUG Получено записей: 15
2017-01-12 10:19:20.4435 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-12 10:19:20.4676 DEBUG Получено записей: 105
2017-01-12 10:19:20.8776 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-12 10:19:20.8896 DEBUG Получено записей: 105
2017-01-12 10:19:20.8896 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-12 10:19:20.8896 DEBUG Получено записей: 8
2017-01-12 10:19:20.9126 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-12 10:19:20.9126 DEBUG Получено записей: 9
2017-01-12 10:19:20.9246 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-12 10:19:21.0296 DEBUG Получено записей: 682
2017-01-12 10:20:43.3733 ERROR Cannot open connection: Failed to establish a connection to '192.168.16.253'.
2017-01-12 10:21:11.2469 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-12 10:21:11.2469 DEBUG Получено записей: 175
2017-01-12 10:21:11.2639 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-12 10:21:11.4709 DEBUG Получено записей: 13813
2017-01-12 10:21:49.9721 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 10:21:49.9721 DEBUG Получено записей: 11
2017-01-12 10:21:50.0071 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 10:21:50.0141 DEBUG Получено записей: 77
2017-01-12 10:21:50.0851 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 10:21:50.0931 DEBUG Получено записей: 107
2017-01-12 10:22:20.3658 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-12 10:22:20.3658 DEBUG PatientFindForm OperatorId: 2469
2017-01-12 10:22:20.3678 DEBUG PatientFindForm DoctorId: 2469
2017-01-12 10:22:20.5008 DEBUG DoctorQuery
2017-01-12 10:22:20.5008 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 10:22:20.5008 DEBUG @date: 12.01.2017
2017-01-12 10:22:20.5008 DEBUG @doctor: 2469
2017-01-12 10:22:20.5008 DEBUG bindQueryToDataGrid
2017-01-12 10:22:20.5148 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 10:22:20.5148 DEBUG SqlParams:
2017-01-12 10:22:20.5148 DEBUG SqlParam @date='12.01.2017'
2017-01-12 10:22:20.5148 DEBUG SqlParam @doctor=2469
2017-01-12 10:22:38.9769 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-12 10:22:38.9769 DEBUG SqlParams:
2017-01-12 10:22:38.9769 DEBUG SqlParam @fam=чжан%
2017-01-12 10:23:05.7924 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-12 10:23:05.8784 DEBUG Получено записей: 4
2017-01-12 10:23:05.9694 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-12 10:23:05.9694 DEBUG Получено записей: 0
2017-01-12 10:23:05.9694 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-12 10:23:05.9994 DEBUG Получено записей: 1
2017-01-12 10:23:06.0865 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-12 10:23:06.4895 DEBUG Получено записей: 167
2017-01-12 10:23:08.5196 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-12 10:23:08.5196 DEBUG Получено записей: 1
2017-01-12 10:23:08.6156 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 10:23:08.6186 DEBUG Получено записей: 1
2017-01-12 10:23:48.2779 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 10:23:48.2779 DEBUG Получено записей: 1
2017-01-12 10:23:48.3679 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-12 10:23:48.3679 DEBUG Получено записей: 1
2017-01-12 10:23:48.3949 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 10:23:50.2350 DEBUG Получено записей: 36279
2017-01-12 10:25:15.0798 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 10:25:17.0029 DEBUG Получено записей: 36279
2017-01-12 10:25:17.3780 DEBUG Запрос: select name from codifiers.signa_tab order by name;
2017-01-12 10:25:17.3780 DEBUG Получено записей: 20
2017-01-12 10:25:17.4090 DEBUG Запрос: SELECT d.*,c.name as character_name, v.name AS type_name, m.mkb as mkb_name, s.name_stadiya as stadia_name, v.sort as diagn_type_sort FROM diagn_tab d LEFT JOIN public.sp_stadiya_diagn_tab s ON d.stage_of_disease = s.sp_stadiya_diagn_id LEFT JOIN codifiers.sp_disease_vid_tab v ON v.id = d.sp_disease_vid_id LEFT JOIN codifiers.diagn_type_tab c ON d.diagn_type_id = c.id LEFT JOIN mkb_tab m ON m.kod_d = d.diagn_osn WHERE d.talon_id = @id
2017-01-12 10:25:17.4170 DEBUG Получено записей: 1
2017-01-12 10:29:11.7454 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 10:29:11.7954 DEBUG Получено записей: 187
2017-01-12 10:29:14.2345 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 10:29:14.2345 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 10:29:14.2665 DEBUG Result 
2017-01-12 10:29:14.2665 DEBUG нет шаблона для пользователя
2017-01-12 10:29:14.2665 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 10:29:14.2665 DEBUG Parameters: @patterncode 
2017-01-12 10:29:14.2815 DEBUG Result 
2017-01-12 10:29:14.3375 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 10:29:14.3375 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 10:29:14.3495 DEBUG Result 
2017-01-12 10:29:14.3495 DEBUG нет шаблона для пользователя
2017-01-12 10:29:14.3495 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 10:29:14.3495 DEBUG Parameters: @patterncode 
2017-01-12 10:29:14.3495 DEBUG Result 
2017-01-12 10:29:14.7405 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-12 10:29:14.7405 DEBUG Получено записей: 9
2017-01-12 10:29:14.7545 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-12 10:29:14.7545 DEBUG Получено записей: 4
2017-01-12 10:29:14.7685 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-12 10:29:14.7685 DEBUG Получено записей: 22
2017-01-12 10:29:14.7855 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-12 10:29:14.7855 DEBUG Получено записей: 3
2017-01-12 10:29:14.7995 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-12 10:29:14.8205 DEBUG Получено записей: 29
2017-01-12 10:29:14.8325 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-12 10:29:14.8325 DEBUG Получено записей: 15
2017-01-12 10:29:14.8475 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-12 10:29:14.8725 DEBUG Получено записей: 105
2017-01-12 10:29:15.2186 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-12 10:29:15.2336 DEBUG Получено записей: 105
2017-01-12 10:29:15.2446 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-12 10:29:15.2446 DEBUG Получено записей: 8
2017-01-12 10:29:15.2586 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-12 10:29:15.2586 DEBUG Получено записей: 9
2017-01-12 10:29:15.2726 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-12 10:29:15.3746 DEBUG Получено записей: 682
2017-01-12 10:29:43.4802 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-12 10:29:43.4802 DEBUG Получено записей: 175
2017-01-12 10:29:43.4982 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-12 10:29:43.7002 DEBUG Получено записей: 13813
2017-01-12 10:30:54.2322 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 10:30:54.2322 DEBUG Получено записей: 11
2017-01-12 10:30:54.2472 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 10:30:54.2532 DEBUG Получено записей: 77
2017-01-12 10:30:54.3072 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 10:30:54.3142 DEBUG Получено записей: 107
2017-01-12 10:31:07.2690 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-12 10:31:07.2690 DEBUG PatientFindForm OperatorId: 2469
2017-01-12 10:31:07.2690 DEBUG PatientFindForm DoctorId: 2469
2017-01-12 10:31:12.2833 DEBUG DoctorQuery
2017-01-12 10:31:12.2833 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 10:31:12.2843 DEBUG @date: 12.01.2017
2017-01-12 10:31:12.2843 DEBUG @doctor: 2469
2017-01-12 10:31:12.2843 DEBUG bindQueryToDataGrid
2017-01-12 10:31:12.2843 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 10:31:12.2843 DEBUG SqlParams:
2017-01-12 10:31:12.2843 DEBUG SqlParam @date='12.01.2017'
2017-01-12 10:31:12.2843 DEBUG SqlParam @doctor=2469
2017-01-12 10:31:32.9144 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam and Lower(d.mid) LIKE @mid ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-12 10:31:32.9144 DEBUG SqlParams:
2017-01-12 10:31:32.9144 DEBUG SqlParam @fam=чжан%
2017-01-12 10:31:32.9144 DEBUG SqlParam @nam=в%
2017-01-12 10:31:32.9144 DEBUG SqlParam @mid=ш%
2017-01-12 10:31:40.8409 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-12 10:31:40.9139 DEBUG Получено записей: 4
2017-01-12 10:31:41.0019 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-12 10:31:41.0049 DEBUG Получено записей: 0
2017-01-12 10:31:41.0049 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-12 10:31:41.0279 DEBUG Получено записей: 1
2017-01-12 10:31:41.1159 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-12 10:31:41.1299 DEBUG Получено записей: 167
2017-01-12 10:31:42.9510 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-12 10:31:42.9540 DEBUG Получено записей: 1
2017-01-12 10:31:43.0410 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 10:31:43.0410 DEBUG Получено записей: 1
2017-01-12 10:33:13.2862 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 10:33:13.2862 DEBUG Получено записей: 1
2017-01-12 10:33:13.3862 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-12 10:33:13.3922 DEBUG Получено записей: 1
2017-01-12 10:33:13.4102 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 10:33:15.1133 DEBUG Получено записей: 36279
2017-01-12 10:33:19.5085 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 10:33:21.2466 DEBUG Получено записей: 36279
2017-01-12 10:33:21.6257 DEBUG Запрос: select name from codifiers.signa_tab order by name;
2017-01-12 10:33:21.6257 DEBUG Получено записей: 20
2017-01-12 10:33:21.6577 DEBUG Запрос: SELECT d.*,c.name as character_name, v.name AS type_name, m.mkb as mkb_name, s.name_stadiya as stadia_name, v.sort as diagn_type_sort FROM diagn_tab d LEFT JOIN public.sp_stadiya_diagn_tab s ON d.stage_of_disease = s.sp_stadiya_diagn_id LEFT JOIN codifiers.sp_disease_vid_tab v ON v.id = d.sp_disease_vid_id LEFT JOIN codifiers.diagn_type_tab c ON d.diagn_type_id = c.id LEFT JOIN mkb_tab m ON m.kod_d = d.diagn_osn WHERE d.talon_id = @id
2017-01-12 10:33:21.6577 DEBUG Получено записей: 1
2017-01-12 10:42:35.7924 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 10:42:37.5785 DEBUG Получено записей: 36279
2017-01-12 10:42:37.9435 DEBUG Запрос: select name from codifiers.signa_tab order by name;
2017-01-12 10:42:37.9435 DEBUG Получено записей: 20
2017-01-12 10:42:37.9675 DEBUG Запрос: SELECT d.*,c.name as character_name, v.name AS type_name, m.mkb as mkb_name, s.name_stadiya as stadia_name, v.sort as diagn_type_sort FROM diagn_tab d LEFT JOIN public.sp_stadiya_diagn_tab s ON d.stage_of_disease = s.sp_stadiya_diagn_id LEFT JOIN codifiers.sp_disease_vid_tab v ON v.id = d.sp_disease_vid_id LEFT JOIN codifiers.diagn_type_tab c ON d.diagn_type_id = c.id LEFT JOIN mkb_tab m ON m.kod_d = d.diagn_osn WHERE d.talon_id = @id
2017-01-12 10:42:37.9755 DEBUG Получено записей: 1
2017-01-12 10:53:42.9985 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 10:53:44.5666 DEBUG Получено записей: 36279
2017-01-12 10:53:44.8566 DEBUG Запрос: select name from codifiers.signa_tab order by name;
2017-01-12 10:53:44.8596 DEBUG Получено записей: 20
2017-01-12 10:53:44.8816 DEBUG Запрос: SELECT d.*,c.name as character_name, v.name AS type_name, m.mkb as mkb_name, s.name_stadiya as stadia_name, v.sort as diagn_type_sort FROM diagn_tab d LEFT JOIN public.sp_stadiya_diagn_tab s ON d.stage_of_disease = s.sp_stadiya_diagn_id LEFT JOIN codifiers.sp_disease_vid_tab v ON v.id = d.sp_disease_vid_id LEFT JOIN codifiers.diagn_type_tab c ON d.diagn_type_id = c.id LEFT JOIN mkb_tab m ON m.kod_d = d.diagn_osn WHERE d.talon_id = @id
2017-01-12 10:53:44.8916 DEBUG Получено записей: 1
2017-01-12 10:57:09.4263 DEBUG Запрос: SELECT count(dan_id) FROM rezept_tab WHERE dan_id = @patientId and date_vipiski = @date;
2017-01-12 10:57:09.4263 DEBUG Получено записей: 1
2017-01-12 10:57:09.4443 DEBUG Запрос: SELECT count(dan_id) FROM rezept_tab WHERE dan_id = @patientId and date_part('month', date_vipiski) = @month;
2017-01-12 10:57:09.4443 DEBUG Получено записей: 1
2017-01-12 11:00:18.9972 DEBUG Запрос: select r.rezept_id, r.rezept_ser, r.rezept_num, r.date_vipiski, r.date_otpusk, r.diagn_id, r.lekarstv_id, r.bad, d.fio from public.rezept_tab r inner join full_doctor_view2 d on r.doctor_id = d.full_doctor_id where r.dan_id = @id
2017-01-12 11:00:19.0192 DEBUG Получено записей: 161
2017-01-12 11:03:30.4331 DEBUG Запрос: select r.rezept_id, r.rezept_ser, r.rezept_num, r.date_vipiski, r.date_otpusk, r.diagn_id, r.lekarstv_id, r.bad, d.fio from public.rezept_tab r inner join full_doctor_view2 d on r.doctor_id = d.full_doctor_id where r.dan_id = @id
2017-01-12 11:03:30.4551 DEBUG Получено записей: 161
2017-01-12 11:19:44.2958 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 11:19:44.3408 DEBUG Получено записей: 1
2017-01-12 11:19:51.3862 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 11:19:51.3862 DEBUG Получено записей: 11
2017-01-12 11:19:51.4022 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 11:19:51.4082 DEBUG Получено записей: 75
2017-01-12 11:19:51.4612 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 11:19:51.4612 DEBUG Получено записей: 0
2017-01-12 11:20:03.4969 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-12 11:20:03.4969 DEBUG PatientFindForm OperatorId: 2470
2017-01-12 11:20:03.4969 DEBUG PatientFindForm DoctorId: -1
2017-01-12 11:20:04.0670 DEBUG _loggedOperator.DoctorId==-1
2017-01-12 11:20:04.0930 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 11:20:04.0930 DEBUG Получено записей: 1
2017-01-12 11:20:07.5251 DEBUG _loggedOperator.DoctorId:-1
2017-01-12 11:20:21.0649 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-12 11:20:21.0649 DEBUG SqlParams:
2017-01-12 11:20:21.0649 DEBUG SqlParam @fam=раднаев%
2017-01-12 11:20:30.0214 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-12 11:20:30.0214 DEBUG Получено записей: 0
2017-01-12 11:20:30.0324 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-12 11:20:30.0324 DEBUG Получено записей: 0
2017-01-12 11:21:15.6370 ERROR Cannot open connection: Failed to establish a connection to '192.168.16.253'.
2017-01-12 11:33:15.6132 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 11:33:15.6592 DEBUG Получено записей: 1
2017-01-12 11:33:24.7938 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 11:33:24.7958 DEBUG Получено записей: 11
2017-01-12 11:33:24.7958 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 11:33:24.8158 DEBUG Получено записей: 75
2017-01-12 11:33:24.8668 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 11:33:24.8668 DEBUG Получено записей: 0
2017-01-12 11:33:43.1728 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.dan_id = dan.dan_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 11:34:01.8039 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.dan_id = dan.dan_id
                             order by 2
2017-01-12 11:35:09.5417 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.dan_id = dan.dan_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 11:38:20.0556 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-12 11:38:20.0556 DEBUG PatientFindForm OperatorId: 2470
2017-01-12 11:38:20.0556 DEBUG PatientFindForm DoctorId: -1
2017-01-12 11:38:20.3527 DEBUG _loggedOperator.DoctorId==-1
2017-01-12 11:38:20.3797 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 11:38:20.3867 DEBUG Получено записей: 1
2017-01-12 11:38:23.7078 DEBUG _loggedOperator.DoctorId:-1
2017-01-12 11:38:43.7680 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-12 11:38:43.7680 DEBUG SqlParams:
2017-01-12 11:38:43.7680 DEBUG SqlParam @fam=раднаев%
2017-01-12 11:38:51.5754 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-12 11:38:51.5754 DEBUG Получено записей: 0
2017-01-12 11:38:51.5864 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-12 11:38:51.5864 DEBUG Получено записей: 0
2017-01-12 11:39:22.9712 ERROR Cannot open connection: Failed to establish a connection to '192.168.16.253'.
2017-01-12 11:55:46.1945 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 11:55:46.2465 DEBUG Получено записей: 187
2017-01-12 11:55:48.6976 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 11:55:48.6976 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 11:55:48.7266 DEBUG Result 
2017-01-12 11:55:48.7266 DEBUG нет шаблона для пользователя
2017-01-12 11:55:48.7266 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 11:55:48.7266 DEBUG Parameters: @patterncode 
2017-01-12 11:55:48.7406 DEBUG Result 
2017-01-12 11:55:48.7976 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 11:55:48.7976 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 11:55:48.8086 DEBUG Result 
2017-01-12 11:55:48.8086 DEBUG нет шаблона для пользователя
2017-01-12 11:55:48.8086 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 11:55:48.8086 DEBUG Parameters: @patterncode 
2017-01-12 11:55:48.8086 DEBUG Result 
2017-01-12 11:55:49.2116 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-12 11:55:49.2116 DEBUG Получено записей: 9
2017-01-12 11:55:49.2116 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-12 11:55:49.2276 DEBUG Получено записей: 4
2017-01-12 11:55:49.2276 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-12 11:55:49.2436 DEBUG Получено записей: 22
2017-01-12 11:55:49.2436 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-12 11:55:49.2436 DEBUG Получено записей: 3
2017-01-12 11:55:49.2677 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-12 11:55:49.2877 DEBUG Получено записей: 29
2017-01-12 11:55:49.2997 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-12 11:55:49.2997 DEBUG Получено записей: 15
2017-01-12 11:55:49.3137 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-12 11:55:49.3387 DEBUG Получено записей: 105
2017-01-12 11:55:49.6747 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-12 11:55:49.6887 DEBUG Получено записей: 105
2017-01-12 11:55:49.6997 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-12 11:55:49.6997 DEBUG Получено записей: 8
2017-01-12 11:55:49.7117 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-12 11:55:49.7117 DEBUG Получено записей: 9
2017-01-12 11:55:49.7117 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-12 11:55:49.8287 DEBUG Получено записей: 682
2017-01-12 11:56:16.3732 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-12 11:56:16.3732 DEBUG Получено записей: 175
2017-01-12 11:56:16.3922 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-12 11:56:16.6222 DEBUG Получено записей: 13813
2017-01-12 11:56:22.1135 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 11:56:22.1135 DEBUG Получено записей: 11
2017-01-12 11:56:22.1295 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 11:56:22.1545 DEBUG Получено записей: 77
2017-01-12 11:56:22.3005 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 11:56:22.3005 DEBUG Получено записей: 107
2017-01-12 11:56:35.5663 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 11:56:35.5663 DEBUG Получено записей: 11
2017-01-12 11:56:35.5843 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 11:56:35.5913 DEBUG Получено записей: 77
2017-01-12 11:56:35.6413 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 11:56:35.6413 DEBUG Получено записей: 107
2017-01-12 11:57:41.7891 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 11:57:41.8421 DEBUG Получено записей: 187
2017-01-12 11:57:44.3652 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 11:57:44.3652 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 11:57:44.4152 DEBUG Result 
2017-01-12 11:57:44.4152 DEBUG нет шаблона для пользователя
2017-01-12 11:57:44.4152 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 11:57:44.4152 DEBUG Parameters: @patterncode 
2017-01-12 11:57:44.4292 DEBUG Result 
2017-01-12 11:57:44.4892 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 11:57:44.4892 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 11:57:44.5002 DEBUG Result 
2017-01-12 11:57:44.5002 DEBUG нет шаблона для пользователя
2017-01-12 11:57:44.5002 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 11:57:44.5002 DEBUG Parameters: @patterncode 
2017-01-12 11:57:44.5002 DEBUG Result 
2017-01-12 11:57:44.9263 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-12 11:57:44.9263 DEBUG Получено записей: 9
2017-01-12 11:57:44.9413 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-12 11:57:44.9413 DEBUG Получено записей: 4
2017-01-12 11:57:44.9543 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-12 11:57:44.9543 DEBUG Получено записей: 22
2017-01-12 11:57:44.9713 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-12 11:57:45.0033 DEBUG Получено записей: 3
2017-01-12 11:57:45.0163 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-12 11:57:45.0353 DEBUG Получено записей: 29
2017-01-12 11:57:45.0473 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-12 11:57:45.0473 DEBUG Получено записей: 15
2017-01-12 11:57:45.0623 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-12 11:57:45.0903 DEBUG Получено записей: 105
2017-01-12 11:57:45.4413 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-12 11:57:45.4543 DEBUG Получено записей: 105
2017-01-12 11:57:45.4663 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-12 11:57:45.4663 DEBUG Получено записей: 8
2017-01-12 11:57:45.4793 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-12 11:57:45.4793 DEBUG Получено записей: 9
2017-01-12 11:57:45.4793 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-12 11:57:45.6023 DEBUG Получено записей: 682
2017-01-12 11:58:12.0938 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-12 11:58:12.0938 DEBUG Получено записей: 175
2017-01-12 11:58:12.1108 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-12 11:58:12.3428 DEBUG Получено записей: 13813
2017-01-12 11:58:20.5603 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 11:58:20.5603 DEBUG Получено записей: 11
2017-01-12 11:58:20.5833 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 11:58:20.5833 DEBUG Получено записей: 77
2017-01-12 11:58:20.6453 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 11:58:20.6453 DEBUG Получено записей: 107
2017-01-12 11:58:45.7807 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-12 11:58:45.7807 DEBUG PatientFindForm OperatorId: 2469
2017-01-12 11:58:45.7807 DEBUG PatientFindForm DoctorId: 2469
2017-01-12 11:58:45.9378 DEBUG DoctorQuery
2017-01-12 11:58:45.9378 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 11:58:45.9378 DEBUG @date: 12.01.2017
2017-01-12 11:58:45.9378 DEBUG @doctor: 2469
2017-01-12 11:58:45.9378 DEBUG bindQueryToDataGrid
2017-01-12 11:58:45.9528 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 11:58:45.9528 DEBUG SqlParams:
2017-01-12 11:58:45.9528 DEBUG SqlParam @date='12.01.2017'
2017-01-12 11:58:45.9528 DEBUG SqlParam @doctor=2469
2017-01-12 11:59:08.4170 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam and Lower(d.mid) LIKE @mid ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-12 11:59:08.4170 DEBUG SqlParams:
2017-01-12 11:59:08.4170 DEBUG SqlParam @fam=чжан%
2017-01-12 11:59:08.4170 DEBUG SqlParam @nam=в%
2017-01-12 11:59:08.4170 DEBUG SqlParam @mid=ш%
2017-01-12 11:59:18.1366 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-12 11:59:18.2096 DEBUG Получено записей: 4
2017-01-12 11:59:18.2986 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-12 11:59:18.3026 DEBUG Получено записей: 0
2017-01-12 11:59:18.3026 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-12 11:59:18.3396 DEBUG Получено записей: 1
2017-01-12 11:59:18.4236 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-12 11:59:18.5246 DEBUG Получено записей: 167
2017-01-12 11:59:20.4177 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-12 11:59:20.4177 DEBUG Получено записей: 1
2017-01-12 11:59:20.5057 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 11:59:20.5057 DEBUG Получено записей: 1
2017-01-12 12:00:30.2307 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 12:00:30.2347 DEBUG Получено записей: 1
2017-01-12 12:00:30.3307 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-12 12:00:30.3307 DEBUG Получено записей: 1
2017-01-12 12:00:30.3587 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 12:00:32.2648 DEBUG Получено записей: 36279
2017-01-12 12:00:51.4499 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 12:00:53.7401 DEBUG Получено записей: 36279
2017-01-12 12:00:54.1041 DEBUG Запрос: select name from codifiers.signa_tab order by name;
2017-01-12 12:00:54.1041 DEBUG Получено записей: 20
2017-01-12 12:00:54.1361 DEBUG Запрос: SELECT d.*,c.name as character_name, v.name AS type_name, m.mkb as mkb_name, s.name_stadiya as stadia_name, v.sort as diagn_type_sort FROM diagn_tab d LEFT JOIN public.sp_stadiya_diagn_tab s ON d.stage_of_disease = s.sp_stadiya_diagn_id LEFT JOIN codifiers.sp_disease_vid_tab v ON v.id = d.sp_disease_vid_id LEFT JOIN codifiers.diagn_type_tab c ON d.diagn_type_id = c.id LEFT JOIN mkb_tab m ON m.kod_d = d.diagn_osn WHERE d.talon_id = @id
2017-01-12 12:00:54.1361 DEBUG Получено записей: 1
2017-01-12 12:01:04.9077 DEBUG Запрос: select r.rezept_id, r.rezept_ser, r.rezept_num, r.date_vipiski, r.date_otpusk, r.diagn_id, r.lekarstv_id, r.bad, d.fio from public.rezept_tab r inner join full_doctor_view2 d on r.doctor_id = d.full_doctor_id where r.dan_id = @id
2017-01-12 12:01:04.9307 DEBUG Получено записей: 161
2017-01-12 13:00:26.4264 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 13:00:26.4794 DEBUG Получено записей: 187
2017-01-12 13:00:28.9156 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 13:00:28.9156 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 13:00:28.9466 DEBUG Result 
2017-01-12 13:00:28.9466 DEBUG нет шаблона для пользователя
2017-01-12 13:00:28.9466 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 13:00:28.9466 DEBUG Parameters: @patterncode 
2017-01-12 13:00:28.9616 DEBUG Result 
2017-01-12 13:00:29.0166 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 13:00:29.0406 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 13:00:29.0516 DEBUG Result 
2017-01-12 13:00:29.0516 DEBUG нет шаблона для пользователя
2017-01-12 13:00:29.0516 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 13:00:29.0516 DEBUG Parameters: @patterncode 
2017-01-12 13:00:29.0516 DEBUG Result 
2017-01-12 13:00:29.4606 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-12 13:00:29.4606 DEBUG Получено записей: 9
2017-01-12 13:00:29.4756 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-12 13:00:29.4756 DEBUG Получено записей: 4
2017-01-12 13:00:29.5036 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-12 13:00:29.5036 DEBUG Получено записей: 22
2017-01-12 13:00:29.5216 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-12 13:00:29.5216 DEBUG Получено записей: 3
2017-01-12 13:00:29.5346 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-12 13:00:29.5346 DEBUG Получено записей: 29
2017-01-12 13:00:29.5516 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-12 13:00:29.5516 DEBUG Получено записей: 15
2017-01-12 13:00:29.5516 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-12 13:00:29.5896 DEBUG Получено записей: 105
2017-01-12 13:00:29.9106 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-12 13:00:29.9106 DEBUG Получено записей: 105
2017-01-12 13:00:29.9346 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-12 13:00:29.9346 DEBUG Получено записей: 8
2017-01-12 13:00:29.9476 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-12 13:00:29.9476 DEBUG Получено записей: 9
2017-01-12 13:00:29.9616 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-12 13:00:30.0566 DEBUG Получено записей: 682
2017-01-12 13:00:55.7201 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-12 13:00:55.7201 DEBUG Получено записей: 175
2017-01-12 13:00:55.7371 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-12 13:00:55.9451 DEBUG Получено записей: 13813
2017-01-12 13:01:23.4837 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 13:01:23.4837 DEBUG Получено записей: 11
2017-01-12 13:01:23.5067 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 13:01:23.5137 DEBUG Получено записей: 77
2017-01-12 13:01:23.5637 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 13:01:23.5637 DEBUG Получено записей: 107
2017-01-12 13:01:36.0324 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-12 13:01:36.0324 DEBUG PatientFindForm OperatorId: 2469
2017-01-12 13:01:36.0324 DEBUG PatientFindForm DoctorId: 2469
2017-01-12 13:01:36.1694 DEBUG DoctorQuery
2017-01-12 13:01:36.1694 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 13:01:36.1694 DEBUG @date: 12.01.2017
2017-01-12 13:01:36.1694 DEBUG @doctor: 2469
2017-01-12 13:01:36.1694 DEBUG bindQueryToDataGrid
2017-01-12 13:01:36.1834 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 13:01:36.1834 DEBUG SqlParams:
2017-01-12 13:01:36.1834 DEBUG SqlParam @date='12.01.2017'
2017-01-12 13:01:36.1834 DEBUG SqlParam @doctor=2469
2017-01-12 13:01:54.6415 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam and Lower(d.mid) LIKE @mid ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-12 13:01:54.6415 DEBUG SqlParams:
2017-01-12 13:01:54.6415 DEBUG SqlParam @fam=чжан%
2017-01-12 13:01:54.6415 DEBUG SqlParam @nam=в%
2017-01-12 13:01:54.6415 DEBUG SqlParam @mid=ш%
2017-01-12 13:02:01.6619 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-12 13:02:01.7409 DEBUG Получено записей: 4
2017-01-12 13:02:01.8949 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-12 13:02:01.8949 DEBUG Получено записей: 0
2017-01-12 13:02:01.9079 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-12 13:02:01.9469 DEBUG Получено записей: 1
2017-01-12 13:02:02.2019 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-12 13:02:02.3099 DEBUG Получено записей: 167
2017-01-12 13:02:04.2210 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-12 13:02:04.2210 DEBUG Получено записей: 1
2017-01-12 13:02:04.3230 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 13:02:04.3230 DEBUG Получено записей: 1
2017-01-12 13:04:08.6581 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 13:04:08.6581 DEBUG Получено записей: 1
2017-01-12 13:04:08.8031 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-12 13:04:08.8091 DEBUG Получено записей: 1
2017-01-12 13:04:08.8281 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 13:04:10.8712 DEBUG Получено записей: 36279
2017-01-12 13:04:14.8545 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 13:04:16.9286 DEBUG Получено записей: 36279
2017-01-12 13:04:17.2786 DEBUG Запрос: select name from codifiers.signa_tab order by name;
2017-01-12 13:04:17.2816 DEBUG Получено записей: 20
2017-01-12 13:04:17.3076 DEBUG Запрос: SELECT d.*,c.name as character_name, v.name AS type_name, m.mkb as mkb_name, s.name_stadiya as stadia_name, v.sort as diagn_type_sort FROM diagn_tab d LEFT JOIN public.sp_stadiya_diagn_tab s ON d.stage_of_disease = s.sp_stadiya_diagn_id LEFT JOIN codifiers.sp_disease_vid_tab v ON v.id = d.sp_disease_vid_id LEFT JOIN codifiers.diagn_type_tab c ON d.diagn_type_id = c.id LEFT JOIN mkb_tab m ON m.kod_d = d.diagn_osn WHERE d.talon_id = @id
2017-01-12 13:04:17.3166 DEBUG Получено записей: 1
2017-01-12 13:04:27.8492 DEBUG Запрос: select r.rezept_id, r.rezept_ser, r.rezept_num, r.date_vipiski, r.date_otpusk, r.diagn_id, r.lekarstv_id, r.bad, d.fio from public.rezept_tab r inner join full_doctor_view2 d on r.doctor_id = d.full_doctor_id where r.dan_id = @id
2017-01-12 13:04:27.8942 DEBUG Получено записей: 161
2017-01-12 13:23:59.4252 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 13:23:59.4802 DEBUG Получено записей: 1
2017-01-12 13:24:05.6026 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 13:24:05.6026 DEBUG Получено записей: 11
2017-01-12 13:24:05.6246 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 13:24:05.6246 DEBUG Получено записей: 75
2017-01-12 13:24:05.6836 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 13:24:05.6836 DEBUG Получено записей: 0
2017-01-12 13:25:38.9109 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-12 13:25:38.9109 DEBUG PatientFindForm OperatorId: 2470
2017-01-12 13:25:38.9109 DEBUG PatientFindForm DoctorId: -1
2017-01-12 13:25:43.3122 DEBUG _loggedOperator.DoctorId==-1
2017-01-12 13:25:43.3342 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 13:25:43.3412 DEBUG Получено записей: 1
2017-01-12 13:25:43.3762 DEBUG _loggedOperator.DoctorId:-1
2017-01-12 13:26:01.3812 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-12 13:26:01.3812 DEBUG SqlParams:
2017-01-12 13:26:01.3812 DEBUG SqlParam @fam=раднаев%
2017-01-12 13:26:09.4397 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-12 13:26:09.4397 DEBUG Получено записей: 0
2017-01-12 13:26:09.4517 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-12 13:26:09.4517 DEBUG Получено записей: 0
2017-01-12 14:50:13.4732 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 14:50:13.5242 DEBUG Получено записей: 187
2017-01-12 14:50:19.8605 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 14:50:19.8605 DEBUG Получено записей: 11
2017-01-12 14:50:19.8775 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 14:50:19.8775 DEBUG Получено записей: 77
2017-01-12 14:50:19.9365 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 14:50:19.9365 DEBUG Получено записей: 107
2017-01-12 14:51:48.5716 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.dan_id = dan.dan_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 15:27:36.7515 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 15:27:36.8015 DEBUG Получено записей: 187
2017-01-12 15:27:39.5456 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 15:27:39.5456 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 15:27:39.5936 DEBUG Result 
2017-01-12 15:27:39.5936 DEBUG нет шаблона для пользователя
2017-01-12 15:27:39.5936 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 15:27:39.5936 DEBUG Parameters: @patterncode 
2017-01-12 15:27:39.6076 DEBUG Result 
2017-01-12 15:27:39.6616 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 15:27:39.6616 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 15:27:39.6746 DEBUG Result 
2017-01-12 15:27:39.6746 DEBUG нет шаблона для пользователя
2017-01-12 15:27:39.6746 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 15:27:39.6746 DEBUG Parameters: @patterncode 
2017-01-12 15:27:39.6746 DEBUG Result 
2017-01-12 15:27:40.0597 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-12 15:27:40.0597 DEBUG Получено записей: 9
2017-01-12 15:27:40.0767 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-12 15:27:40.0797 DEBUG Получено записей: 4
2017-01-12 15:27:40.0797 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-12 15:27:40.0977 DEBUG Получено записей: 22
2017-01-12 15:27:40.1237 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-12 15:27:40.1267 DEBUG Получено записей: 3
2017-01-12 15:27:40.1267 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-12 15:27:40.1267 DEBUG Получено записей: 29
2017-01-12 15:27:40.1537 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-12 15:27:40.1577 DEBUG Получено записей: 15
2017-01-12 15:27:40.1577 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-12 15:27:40.1937 DEBUG Получено записей: 106
2017-01-12 15:27:40.5207 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-12 15:27:40.5327 DEBUG Получено записей: 106
2017-01-12 15:27:40.5327 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-12 15:27:40.5327 DEBUG Получено записей: 8
2017-01-12 15:27:40.5567 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-12 15:27:40.5567 DEBUG Получено записей: 9
2017-01-12 15:27:40.5707 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-12 15:27:40.6737 DEBUG Получено записей: 682
2017-01-12 15:28:08.1693 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-12 15:28:08.1763 DEBUG Получено записей: 175
2017-01-12 15:28:08.1763 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-12 15:28:08.3923 DEBUG Получено записей: 13813
2017-01-12 15:30:17.2577 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 15:30:17.2577 DEBUG Получено записей: 11
2017-01-12 15:30:17.2827 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 15:30:17.2827 DEBUG Получено записей: 77
2017-01-12 15:30:17.3437 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 15:30:17.3507 DEBUG Получено записей: 107
2017-01-12 15:31:14.6489 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-12 15:31:14.6489 DEBUG PatientFindForm OperatorId: 2469
2017-01-12 15:31:14.6489 DEBUG PatientFindForm DoctorId: 2469
2017-01-12 15:31:14.7819 DEBUG DoctorQuery
2017-01-12 15:31:14.7819 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 15:31:14.7819 DEBUG @date: 12.01.2017
2017-01-12 15:31:14.7819 DEBUG @doctor: 2469
2017-01-12 15:31:14.7839 DEBUG bindQueryToDataGrid
2017-01-12 15:31:14.7839 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-12 15:31:14.7839 DEBUG SqlParams:
2017-01-12 15:31:14.7839 DEBUG SqlParam @date='12.01.2017'
2017-01-12 15:31:14.7999 DEBUG SqlParam @doctor=2469
2017-01-12 15:31:44.3646 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam and Lower(d.mid) LIKE @mid ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-12 15:31:44.3646 DEBUG SqlParams:
2017-01-12 15:31:44.3646 DEBUG SqlParam @fam=чжан%
2017-01-12 15:31:44.3646 DEBUG SqlParam @nam=в%
2017-01-12 15:31:44.3646 DEBUG SqlParam @mid=ш%
2017-01-12 15:31:53.1311 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-12 15:31:53.2031 DEBUG Получено записей: 4
2017-01-12 15:31:53.2892 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-12 15:31:53.2892 DEBUG Получено записей: 0
2017-01-12 15:31:53.2892 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-12 15:31:53.3132 DEBUG Получено записей: 1
2017-01-12 15:31:53.3952 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-12 15:31:53.4732 DEBUG Получено записей: 167
2017-01-12 15:31:55.2303 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-12 15:31:55.2303 DEBUG Получено записей: 1
2017-01-12 15:31:55.3183 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 15:31:55.3183 DEBUG Получено записей: 1
2017-01-12 15:32:14.3794 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-12 15:32:14.3794 DEBUG Получено записей: 1
2017-01-12 15:32:14.5704 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-12 15:32:14.5704 DEBUG Получено записей: 1
2017-01-12 15:32:14.6494 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 15:32:16.4775 DEBUG Получено записей: 36279
2017-01-12 15:32:31.4893 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-12 15:32:33.4064 DEBUG Получено записей: 36279
2017-01-12 15:32:33.7365 DEBUG Запрос: select name from codifiers.signa_tab order by name;
2017-01-12 15:32:33.7365 DEBUG Получено записей: 20
2017-01-12 15:32:33.7675 DEBUG Запрос: SELECT d.*,c.name as character_name, v.name AS type_name, m.mkb as mkb_name, s.name_stadiya as stadia_name, v.sort as diagn_type_sort FROM diagn_tab d LEFT JOIN public.sp_stadiya_diagn_tab s ON d.stage_of_disease = s.sp_stadiya_diagn_id LEFT JOIN codifiers.sp_disease_vid_tab v ON v.id = d.sp_disease_vid_id LEFT JOIN codifiers.diagn_type_tab c ON d.diagn_type_id = c.id LEFT JOIN mkb_tab m ON m.kod_d = d.diagn_osn WHERE d.talon_id = @id
2017-01-12 15:32:33.7675 DEBUG Получено записей: 1
2017-01-12 15:32:43.5770 DEBUG Запрос: select r.rezept_id, r.rezept_ser, r.rezept_num, r.date_vipiski, r.date_otpusk, r.diagn_id, r.lekarstv_id, r.bad, d.fio from public.rezept_tab r inner join full_doctor_view2 d on r.doctor_id = d.full_doctor_id where r.dan_id = @id
2017-01-12 15:32:43.6000 DEBUG Получено записей: 162
2017-01-12 15:46:32.9505 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 15:46:33.0105 DEBUG Получено записей: 1
2017-01-12 15:46:35.4076 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 15:46:35.4096 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 15:46:35.5486 DEBUG Result 
2017-01-12 15:46:35.5486 DEBUG нет шаблона для пользователя
2017-01-12 15:46:35.5486 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 15:46:35.5486 DEBUG Parameters: @patterncode 
2017-01-12 15:46:35.5486 DEBUG Result 
2017-01-12 15:46:35.6326 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-12 15:46:35.6326 DEBUG Parameters: @patterncode=, @operator=
2017-01-12 15:46:35.6446 DEBUG Result 
2017-01-12 15:46:35.6446 DEBUG нет шаблона для пользователя
2017-01-12 15:46:35.6446 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-12 15:46:35.6446 DEBUG Parameters: @patterncode 
2017-01-12 15:46:35.6446 DEBUG Result 
2017-01-12 15:46:36.0936 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-12 15:46:36.1006 DEBUG Получено записей: 9
2017-01-12 15:46:36.1116 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-12 15:46:36.1116 DEBUG Получено записей: 4
2017-01-12 15:46:36.1256 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-12 15:46:36.1256 DEBUG Получено записей: 22
2017-01-12 15:46:36.1436 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-12 15:46:36.1436 DEBUG Получено записей: 3
2017-01-12 15:46:36.1576 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-12 15:46:36.1576 DEBUG Получено записей: 29
2017-01-12 15:46:36.1916 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-12 15:46:36.1916 DEBUG Получено записей: 15
2017-01-12 15:46:36.2077 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-12 15:46:36.2357 DEBUG Получено записей: 102
2017-01-12 15:46:36.5667 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-12 15:46:36.5667 DEBUG Получено записей: 102
2017-01-12 15:46:36.5887 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-12 15:49:58.1402 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-12 15:49:58.1862 DEBUG Получено записей: 1
2017-01-12 15:50:04.7366 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-12 15:50:04.7366 DEBUG Получено записей: 11
2017-01-12 15:50:04.7526 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-12 15:50:04.7526 DEBUG Получено записей: 75
2017-01-12 15:50:04.8106 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-12 15:50:04.8106 DEBUG Получено записей: 0
2017-01-12 15:52:05.5205 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname, 
                            doc.norma, doc.stavka, doc.dan_id patientid,doc.id id,doc.operator_id operatorid,
                            otd.name divisionname,
                            spec.name specialityname, dolg.name positionname, 
                            users.login login
                            from doctor_tab doc
                            left join codifiers.otdel_tab otd on otd.id=doc.sp_otdel_id
                            left join codifiers.doctor_spec_tab spec on spec.id=doc.sp_spec_doctor_id
                            left join codifiers.doctor_dolg_tab dolg on dolg.id=doc.sp_dolg_doctor_id
                            left join dan_tab dan on doc.dan_id = dan.dan_id
                            left join users_tab users on users.dan_id = dan.dan_id
                             where doc.expiration_date>@ExpDate  order by 2
2017-01-12 15:56:46.1585 DEBUG Запрос:  select 
                                d.sp_spec_doctor_id as id, spec.name as name
                                from public.free_talon_tab ft 
                                inner join public.doctor_tab d on ft.doctor_id = d.doctor_id
                                inner join codifiers.doctor_spec_tab spec on d.sp_spec_doctor_id = spec.id
                                where d.show_in_reg=1 and spec.id!=900
                                group by d.sp_spec_doctor_id, spec.name
                                order by spec.name
2017-01-12 15:56:46.2145 DEBUG Запрос:  SELECT doc.id id, d.fam lastname, d.nam firstname, d.mid midname, 
                            doc.inner_doctor_code innercode,
                            spec.name specialityname, spec.id specialityid
                            FROM public.dan_tab d 
                            left join doctor_tab doc on doc.dan_id = d.dan_id
                            inner join codifiers.doctor_spec_tab spec on doc.sp_spec_doctor_id = spec.id
                            where doc.sp_spec_doctor_id=@SpecId and doc.show_in_reg=1 and expiration_date>@Date
                            order by 2
2017-01-12 15:56:46.2425 DEBUG Запрос:  SELECT doc.id id, d.fam lastname, d.nam firstname, d.mid midname, 
                            doc.inner_doctor_code innercode,
                            spec.name specialityname, spec.id specialityid
                            FROM public.dan_tab d 
                            left join doctor_tab doc on doc.dan_id = d.dan_id
                            inner join codifiers.doctor_spec_tab spec on doc.sp_spec_doctor_id = spec.id
                            where doc.sp_spec_doctor_id=@SpecId and doc.show_in_reg=1 and expiration_date>@Date
                            order by 2
2017-01-12 15:56:46.2735 DEBUG Запрос:  select dan.fam lastname, dan.nam firstname, dan.mid midname,
                            dan.date_born birthdate, 
                            case when dan.sex='м' then 1 else 2 end gender,
                            doc.id id,
                            doc.dan_id patientid,
                            doc.date_insert_doctor startdate,
                            doc.date_attestat_doctor certificationdate,
                            doc.federal_code fedcode,
                            doc.sp_dolg_doctor_id  positionid,
                            doc.sp_spec_doctor_id specialityid,
                            doc.stavka,
                            doc.norma,
                            doc.users_id login,
                            doc.sp_otdel_id divisionid,
                            doc.inner_doctor_code innercode,
                            doc.show_in_reg showinreg,
                            doc.description,
                            doc.expiration_date enddate,
                            doc.uet,
                            doc.payment paymentpercent,
                            doc.employee_type emptype,
                            doc.nurse_id nurseid,
                            doc.uchastok_id medareid,
                            doc.sim_pat_count sametimepatientcount,
                            doc.can_have_schedule canhaveschedule,
                            doc.max_records_per_day maxrecords
                            from doctor_tab doc
                            left join dan_tab dan on doc.dan_id = dan.dan_id 
                            where doc.id=@Id
                            
2017-01-12 15:56:46.3285 DEBUG Запрос:  select 
                                d.sp_spec_doctor_id as id, spec.name as name
                                from public.free_talon_tab ft 
                                inner join public.doctor_tab d on ft.doctor_id = d.doctor_id
                                inner join codifiers.doctor_spec_tab spec on d.sp_spec_doctor_id = spec.id
                                where d.show_in_reg=1 and spec.id!=900
                                group by d.sp_spec_doctor_id, spec.name
                                order by spec.name
2017-01-12 15:56:46.3285 DEBUG Запрос:  SELECT doc.id id, d.fam lastname, d.nam firstname, d.mid midname, 
                            doc.inner_doctor_code innercode,
                            spec.name specialityname, spec.id specialityid
                            FROM public.dan_tab d 
                            left join doctor_tab doc on doc.dan_id = d.dan_id
                            inner join codifiers.doctor_spec_tab spec on doc.sp_spec_doctor_id = spec.id
                            where doc.sp_spec_doctor_id=@SpecId and doc.show_in_reg=1 and expiration_date>@Date
                            order by 2
2017-01-12 15:56:46.3545 DEBUG Запрос:  SELECT doc.id id, d.fam lastname, d.nam firstname, d.mid midname, 
                            doc.inner_doctor_code innercode,
                            spec.name specialityname, spec.id specialityid
                            FROM public.dan_tab d 
                            left join doctor_tab doc on doc.dan_id = d.dan_id
                            inner join codifiers.doctor_spec_tab spec on doc.sp_spec_doctor_id = spec.id
                            where doc.sp_spec_doctor_id=@SpecId and doc.show_in_reg=1 and expiration_date>@Date
                            order by 2
2017-01-12 15:56:46.4926 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:46.5976 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:46.6676 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:46.7456 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:46.8146 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:46.8926 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:46.9646 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:47.0676 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:47.1346 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:47.2106 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:47.2816 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:47.3496 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:47.4186 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
2017-01-12 15:56:47.4866 DEBUG Запрос:  select date_talon+time_talon talontime, 
                            ft.doctor_id doctorid, 
                            case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end talontype, 
                            ft.cabinet_nam cabinetname,
                            ft.cabinet_id cabinetid,
                            vt.name talontypename,vt.color talontypecolor, 
                            ft.reserve_patient_count reservedcount ,
                            tdt.dan_id patientid
                            from free_talon_tab ft
                            left join codifiers.vid_talon_tab vt on (case when ft.reserve_patient_count>0 then 7 else ft.vid_talon_id end)=vt.id
                            left join talon_doctor_tab tdt on tdt.doctor_id=ft.doctor_id and tdt.date_nazn=ft.date_talon and tdt.time_nazn=ft.time_talon
                            where ft.doctor_id=@DocId and date_talon=@Date
                            order by date_talon,time_talon
