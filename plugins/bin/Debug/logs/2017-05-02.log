2017-05-02 11:30:35.1733 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-05-02 11:30:35.2533 DEBUG Получено записей: 187
2017-05-02 11:30:38.1785 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 11:30:38.1785 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 11:30:38.2045 DEBUG Result 
2017-05-02 11:30:38.2045 DEBUG нет шаблона для пользователя
2017-05-02 11:30:38.2045 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 11:30:38.2045 DEBUG Parameters: @patterncode 
2017-05-02 11:30:38.2195 DEBUG Result 
2017-05-02 11:30:38.2605 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 11:30:38.2605 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 11:30:38.2755 DEBUG Result 
2017-05-02 11:30:38.2755 DEBUG нет шаблона для пользователя
2017-05-02 11:30:38.2755 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 11:30:38.2755 DEBUG Parameters: @patterncode 
2017-05-02 11:30:38.2885 DEBUG Result 
2017-05-02 11:30:38.6745 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-05-02 11:30:38.6745 DEBUG Получено записей: 9
2017-05-02 11:30:38.6895 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-05-02 11:30:38.6895 DEBUG Получено записей: 4
2017-05-02 11:30:38.7035 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-05-02 11:30:38.7175 DEBUG Получено записей: 22
2017-05-02 11:30:38.7175 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-05-02 11:30:38.7335 DEBUG Получено записей: 3
2017-05-02 11:30:38.7335 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-05-02 11:30:38.7335 DEBUG Получено записей: 29
2017-05-02 11:30:38.7605 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-05-02 11:30:38.7605 DEBUG Получено записей: 15
2017-05-02 11:30:38.7755 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 11:30:38.7945 DEBUG Получено записей: 113
2017-05-02 11:30:39.0625 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-05-02 11:30:39.0625 DEBUG Получено записей: 113
2017-05-02 11:30:39.0845 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-05-02 11:30:39.0845 DEBUG Получено записей: 8
2017-05-02 11:30:39.1045 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab where sp_type_napr_id!=1 ORDER BY 1;
2017-05-02 11:30:39.1045 DEBUG Получено записей: 8
2017-05-02 11:30:39.1225 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-05-02 11:30:39.1275 DEBUG Получено записей: 176
2017-05-02 11:30:39.1435 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 11:30:39.3086 DEBUG Получено записей: 13813
2017-05-02 11:30:43.8408 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-05-02 11:30:43.8408 DEBUG Получено записей: 11
2017-05-02 11:30:43.8568 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-05-02 11:30:43.8568 DEBUG Получено записей: 77
2017-05-02 11:30:43.9048 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-05-02 11:30:43.9048 DEBUG Получено записей: 107
2017-05-02 11:30:44.1778 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 11:30:44.1778 DEBUG Получено записей: 113
2017-05-02 11:30:46.8720 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-05-02 11:30:46.8720 DEBUG PatientFindForm OperatorId: 2469
2017-05-02 11:30:46.8720 DEBUG PatientFindForm DoctorId: 2469
2017-05-02 11:30:46.9730 DEBUG DoctorQuery
2017-05-02 11:30:46.9730 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 11:30:46.9730 DEBUG @date: 02.05.2017
2017-05-02 11:30:46.9730 DEBUG @doctor: 2469
2017-05-02 11:30:46.9730 DEBUG bindQueryToDataGrid
2017-05-02 11:30:46.9730 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 11:30:46.9730 DEBUG SqlParams:
2017-05-02 11:30:46.9730 DEBUG SqlParam @date='02.05.2017'
2017-05-02 11:30:46.9730 DEBUG SqlParam @doctor=2469
2017-05-02 11:30:57.8336 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-05-02 11:30:57.8336 DEBUG SqlParams:
2017-05-02 11:30:57.8336 DEBUG SqlParam @fam=вазрушкина%
2017-05-02 11:30:57.8336 DEBUG SqlParam @nam=алевтина%
2017-05-02 11:31:08.5142 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-05-02 11:31:08.5142 DEBUG SqlParams:
2017-05-02 11:31:08.5142 DEBUG SqlParam @fam=вахрушкина%
2017-05-02 11:31:08.5142 DEBUG SqlParam @nam=алевтина%
2017-05-02 11:31:10.6313 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-05-02 11:31:10.7114 DEBUG Получено записей: 4
2017-05-02 11:31:10.7934 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 11:31:10.7934 DEBUG Получено записей: 1
2017-05-02 11:31:10.9104 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-05-02 11:31:11.2244 DEBUG Получено записей: 503
2017-05-02 11:31:16.9037 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-05-02 11:31:16.9067 DEBUG Получено записей: 1
2017-05-02 11:31:16.9837 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 11:31:16.9867 DEBUG Получено записей: 1
2017-05-02 11:31:28.1193 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 11:31:28.1233 DEBUG Получено записей: 1
2017-05-02 11:31:28.2234 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-05-02 11:31:28.2234 DEBUG Получено записей: 0
2017-05-02 11:31:28.2424 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls, p.kod_rias FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-05-02 11:31:29.7464 DEBUG Получено записей: 36326
2017-05-02 11:31:32.2426 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-05-02 11:31:32.2426 DEBUG Получено записей: 1
2017-05-02 11:31:32.3206 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 11:31:32.3206 DEBUG Получено записей: 1
2017-05-02 11:31:32.4056 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-05-02 11:31:32.4056 DEBUG Получено записей: 0
2017-05-02 13:25:09.5285 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-05-02 13:25:09.5705 DEBUG Получено записей: 187
2017-05-02 13:25:11.5906 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 13:25:11.5916 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 13:25:11.6166 DEBUG Result 
2017-05-02 13:25:11.6166 DEBUG нет шаблона для пользователя
2017-05-02 13:25:11.6166 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 13:25:11.6166 DEBUG Parameters: @patterncode 
2017-05-02 13:25:11.6296 DEBUG Result 
2017-05-02 13:25:11.6686 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 13:25:11.6686 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 13:25:11.6806 DEBUG Result 
2017-05-02 13:25:11.6806 DEBUG нет шаблона для пользователя
2017-05-02 13:25:11.6806 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 13:25:11.6806 DEBUG Parameters: @patterncode 
2017-05-02 13:25:11.6926 DEBUG Result 
2017-05-02 13:25:11.9406 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-05-02 13:25:11.9406 DEBUG Получено записей: 9
2017-05-02 13:25:11.9547 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-05-02 13:25:11.9547 DEBUG Получено записей: 4
2017-05-02 13:25:11.9677 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-05-02 13:25:11.9817 DEBUG Получено записей: 22
2017-05-02 13:25:11.9817 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-05-02 13:25:11.9817 DEBUG Получено записей: 3
2017-05-02 13:25:12.0057 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-05-02 13:25:12.0057 DEBUG Получено записей: 29
2017-05-02 13:25:12.0207 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-05-02 13:25:12.0207 DEBUG Получено записей: 15
2017-05-02 13:25:12.0347 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 13:25:12.0537 DEBUG Получено записей: 113
2017-05-02 13:25:12.2817 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-05-02 13:25:12.2817 DEBUG Получено записей: 113
2017-05-02 13:25:12.3027 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-05-02 13:25:12.3027 DEBUG Получено записей: 8
2017-05-02 13:25:12.3157 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab where sp_type_napr_id!=1 ORDER BY 1;
2017-05-02 13:25:12.3157 DEBUG Получено записей: 8
2017-05-02 13:25:12.3297 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-05-02 13:25:12.3297 DEBUG Получено записей: 176
2017-05-02 13:25:12.3477 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 13:25:12.5207 DEBUG Получено записей: 13813
2017-05-02 13:25:17.5370 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-05-02 13:25:17.5370 DEBUG Получено записей: 11
2017-05-02 13:25:17.5510 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-05-02 13:25:17.5510 DEBUG Получено записей: 77
2017-05-02 13:25:17.5970 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-05-02 13:25:17.6040 DEBUG Получено записей: 107
2017-05-02 13:25:17.8500 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 13:25:17.8500 DEBUG Получено записей: 113
2017-05-02 13:25:22.8083 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-05-02 13:25:22.8083 DEBUG PatientFindForm OperatorId: 2469
2017-05-02 13:25:22.8083 DEBUG PatientFindForm DoctorId: 2469
2017-05-02 13:25:22.9153 DEBUG DoctorQuery
2017-05-02 13:25:22.9153 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 13:25:22.9153 DEBUG @date: 02.05.2017
2017-05-02 13:25:22.9153 DEBUG @doctor: 2469
2017-05-02 13:25:22.9153 DEBUG bindQueryToDataGrid
2017-05-02 13:25:22.9263 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 13:25:22.9263 DEBUG SqlParams:
2017-05-02 13:25:22.9263 DEBUG SqlParam @date='02.05.2017'
2017-05-02 13:25:22.9263 DEBUG SqlParam @doctor=2469
2017-05-02 13:25:36.9921 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-05-02 13:25:36.9921 DEBUG SqlParams:
2017-05-02 13:25:36.9921 DEBUG SqlParam @fam=аветян%
2017-05-02 13:25:36.9921 DEBUG SqlParam @nam=мактах%
2017-05-02 13:25:39.5092 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-05-02 13:25:39.5922 DEBUG Получено записей: 4
2017-05-02 13:25:39.6612 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 13:25:39.6612 DEBUG Получено записей: 0
2017-05-02 13:25:39.7262 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-05-02 13:25:39.7712 DEBUG Получено записей: 82
2017-05-02 13:25:40.7443 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-05-02 13:25:40.7443 DEBUG Получено записей: 0
2017-05-02 13:25:40.7783 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 13:25:40.7813 DEBUG Получено записей: 0
2017-05-02 13:25:58.7963 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-05-02 13:25:58.7983 DEBUG Получено записей: 1
2017-05-02 13:25:58.8643 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 13:25:58.8643 DEBUG Получено записей: 0
2017-05-02 13:25:58.9363 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-05-02 13:25:58.9413 DEBUG Получено записей: 0
2017-05-02 13:25:58.9543 DEBUG Запрос: SELECT s.name, s.code, c.date_begin, c.date_end, c.cost, e.sp_uslug_id as service_id  FROM eq_uslug_doctor_tab e JOIN eq_uslug_cost_tab c ON c.sp_uslug_id = e.sp_uslug_id AND sp_lpu_id = get_lpu_number()::bigint AND c.sp_kind_paid_id = 0 AND @visitDate::date BETWEEN date_begin AND date_end LEFT JOIN codifiers.sp_uslug_tab s ON s.id = e.sp_uslug_id WHERE e.doctor_id = @doctorId ORDER BY 1,2;
2017-05-02 13:25:58.9543 DEBUG Получено записей: 0
2017-05-02 13:25:58.9783 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls, p.kod_rias FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-05-02 13:26:00.4654 DEBUG Получено записей: 36326
2017-05-02 13:26:01.5875 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 13:26:01.5915 DEBUG Получено записей: 0
2017-05-02 13:26:08.2219 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 13:26:08.2219 DEBUG Получено записей: 0
2017-05-02 13:26:08.2909 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-05-02 13:26:08.2909 DEBUG Получено записей: 0
2017-05-02 13:26:08.3059 DEBUG Запрос: SELECT s.name, s.code, c.date_begin, c.date_end, c.cost, e.sp_uslug_id as service_id  FROM eq_uslug_doctor_tab e JOIN eq_uslug_cost_tab c ON c.sp_uslug_id = e.sp_uslug_id AND sp_lpu_id = get_lpu_number()::bigint AND c.sp_kind_paid_id = 0 AND @visitDate::date BETWEEN date_begin AND date_end LEFT JOIN codifiers.sp_uslug_tab s ON s.id = e.sp_uslug_id WHERE e.doctor_id = @doctorId ORDER BY 1,2;
2017-05-02 13:26:08.3149 DEBUG Получено записей: 0
2017-05-02 13:50:24.3862 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-05-02 13:50:24.4232 DEBUG Получено записей: 187
2017-05-02 13:50:26.4513 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 13:50:26.4513 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 13:50:26.4773 DEBUG Result 
2017-05-02 13:50:26.4773 DEBUG нет шаблона для пользователя
2017-05-02 13:50:26.4773 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 13:50:26.4773 DEBUG Parameters: @patterncode 
2017-05-02 13:50:26.4913 DEBUG Result 
2017-05-02 13:50:26.5323 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 13:50:26.5323 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 13:50:26.5453 DEBUG Result 
2017-05-02 13:50:26.5453 DEBUG нет шаблона для пользователя
2017-05-02 13:50:26.5453 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 13:50:26.5453 DEBUG Parameters: @patterncode 
2017-05-02 13:50:26.5583 DEBUG Result 
2017-05-02 13:50:26.8193 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-05-02 13:50:26.8193 DEBUG Получено записей: 9
2017-05-02 13:50:26.8333 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-05-02 13:50:26.8333 DEBUG Получено записей: 4
2017-05-02 13:50:26.8473 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-05-02 13:50:26.8613 DEBUG Получено записей: 22
2017-05-02 13:50:26.8613 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-05-02 13:50:26.8613 DEBUG Получено записей: 3
2017-05-02 13:50:26.8853 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-05-02 13:50:26.8853 DEBUG Получено записей: 29
2017-05-02 13:50:26.9003 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-05-02 13:50:26.9003 DEBUG Получено записей: 15
2017-05-02 13:50:26.9133 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 13:50:26.9323 DEBUG Получено записей: 113
2017-05-02 13:50:27.1993 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-05-02 13:50:27.2103 DEBUG Получено записей: 113
2017-05-02 13:50:27.2233 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-05-02 13:50:27.2233 DEBUG Получено записей: 8
2017-05-02 13:50:27.2363 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab where sp_type_napr_id!=1 ORDER BY 1;
2017-05-02 13:50:27.2363 DEBUG Получено записей: 8
2017-05-02 13:50:27.2593 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-05-02 13:50:27.2593 DEBUG Получено записей: 176
2017-05-02 13:50:27.2833 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 13:50:27.4733 DEBUG Получено записей: 13813
2017-05-02 13:50:32.3236 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-05-02 13:50:32.3236 DEBUG Получено записей: 11
2017-05-02 13:50:32.3386 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-05-02 13:50:32.3386 DEBUG Получено записей: 77
2017-05-02 13:50:32.3896 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-05-02 13:50:32.3896 DEBUG Получено записей: 107
2017-05-02 13:50:32.6576 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 13:50:32.6676 DEBUG Получено записей: 113
2017-05-02 13:50:35.4258 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-05-02 13:50:35.4258 DEBUG PatientFindForm OperatorId: 2469
2017-05-02 13:50:35.4258 DEBUG PatientFindForm DoctorId: 2469
2017-05-02 13:50:35.5258 DEBUG DoctorQuery
2017-05-02 13:50:35.5258 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 13:50:35.5258 DEBUG @date: 02.05.2017
2017-05-02 13:50:35.5258 DEBUG @doctor: 2469
2017-05-02 13:50:35.5258 DEBUG bindQueryToDataGrid
2017-05-02 13:50:35.5368 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 13:50:35.5368 DEBUG SqlParams:
2017-05-02 13:50:35.5368 DEBUG SqlParam @date='02.05.2017'
2017-05-02 13:50:35.5368 DEBUG SqlParam @doctor=2469
2017-05-02 13:50:44.0993 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-05-02 13:50:44.0993 DEBUG SqlParams:
2017-05-02 13:50:44.0993 DEBUG SqlParam @fam=вахршукина%
2017-05-02 13:50:44.0993 DEBUG SqlParam @nam=алевтина%
2017-05-02 13:50:54.6779 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-05-02 13:50:54.6779 DEBUG SqlParams:
2017-05-02 13:50:54.6779 DEBUG SqlParam @fam=вахрушкина%
2017-05-02 13:50:54.6779 DEBUG SqlParam @nam=алевтина%
2017-05-02 13:50:56.4860 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-05-02 13:50:56.5660 DEBUG Получено записей: 4
2017-05-02 13:50:56.6490 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 13:50:56.6490 DEBUG Получено записей: 1
2017-05-02 13:50:56.7840 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-05-02 13:50:56.8040 DEBUG Получено записей: 503
2017-05-02 13:51:02.8794 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-05-02 13:51:02.8824 DEBUG Получено записей: 1
2017-05-02 13:51:02.9574 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 13:51:02.9604 DEBUG Получено записей: 1
2017-05-02 13:51:09.6907 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls, p.kod_rias FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-05-02 13:51:11.1838 DEBUG Получено записей: 36326
2017-05-02 13:57:08.4343 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-05-02 13:57:08.4713 DEBUG Получено записей: 187
2017-05-02 13:57:10.4344 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 13:57:10.4364 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 13:57:10.4664 DEBUG Result 
2017-05-02 13:57:10.4664 DEBUG нет шаблона для пользователя
2017-05-02 13:57:10.4664 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 13:57:10.4664 DEBUG Parameters: @patterncode 
2017-05-02 13:57:10.4814 DEBUG Result 
2017-05-02 13:57:10.5324 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 13:57:10.5324 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 13:57:10.5464 DEBUG Result 
2017-05-02 13:57:10.5464 DEBUG нет шаблона для пользователя
2017-05-02 13:57:10.5464 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 13:57:10.5464 DEBUG Parameters: @patterncode 
2017-05-02 13:57:10.5464 DEBUG Result 
2017-05-02 13:57:10.8454 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-05-02 13:57:10.8454 DEBUG Получено записей: 9
2017-05-02 13:57:10.8594 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-05-02 13:57:10.8594 DEBUG Получено записей: 4
2017-05-02 13:57:10.8734 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-05-02 13:57:10.8894 DEBUG Получено записей: 22
2017-05-02 13:57:10.8894 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-05-02 13:57:10.9044 DEBUG Получено записей: 3
2017-05-02 13:57:10.9044 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-05-02 13:57:10.9194 DEBUG Получено записей: 29
2017-05-02 13:57:10.9194 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-05-02 13:57:10.9344 DEBUG Получено записей: 15
2017-05-02 13:57:10.9344 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 13:57:10.9694 DEBUG Получено записей: 113
2017-05-02 13:57:11.2614 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-05-02 13:57:11.2784 DEBUG Получено записей: 113
2017-05-02 13:57:11.2784 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-05-02 13:57:11.2944 DEBUG Получено записей: 8
2017-05-02 13:57:11.2944 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab where sp_type_napr_id!=1 ORDER BY 1;
2017-05-02 13:57:11.3084 DEBUG Получено записей: 8
2017-05-02 13:57:11.3084 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-05-02 13:57:11.3284 DEBUG Получено записей: 176
2017-05-02 13:57:11.3414 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 13:57:11.5484 DEBUG Получено записей: 13813
2017-05-02 13:57:26.6593 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-05-02 13:57:26.6593 DEBUG Получено записей: 11
2017-05-02 13:57:26.6813 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-05-02 13:57:26.6813 DEBUG Получено записей: 77
2017-05-02 13:57:26.7403 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-05-02 13:57:26.7403 DEBUG Получено записей: 107
2017-05-02 13:57:26.9933 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 13:57:27.0033 DEBUG Получено записей: 113
2017-05-02 13:57:30.2845 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-05-02 13:57:30.2845 DEBUG PatientFindForm OperatorId: 2469
2017-05-02 13:57:30.2845 DEBUG PatientFindForm DoctorId: 2469
2017-05-02 13:57:30.4255 DEBUG DoctorQuery
2017-05-02 13:57:30.4255 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 13:57:30.4255 DEBUG @date: 02.05.2017
2017-05-02 13:57:30.4255 DEBUG @doctor: 2469
2017-05-02 13:57:30.4255 DEBUG bindQueryToDataGrid
2017-05-02 13:57:30.4405 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 13:57:30.4405 DEBUG SqlParams:
2017-05-02 13:57:30.4405 DEBUG SqlParam @date='02.05.2017'
2017-05-02 13:57:30.4405 DEBUG SqlParam @doctor=2469
2017-05-02 13:57:43.8653 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-05-02 13:57:43.8663 DEBUG SqlParams:
2017-05-02 13:57:43.8663 DEBUG SqlParam @fam=вахрушкина%
2017-05-02 13:57:43.8663 DEBUG SqlParam @nam=алевтина%
2017-05-02 13:57:47.0445 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-05-02 13:57:47.1255 DEBUG Получено записей: 4
2017-05-02 13:57:47.2195 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 13:57:47.2225 DEBUG Получено записей: 1
2017-05-02 13:57:47.3435 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-05-02 13:57:47.3675 DEBUG Получено записей: 503
2017-05-02 13:57:53.9969 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-05-02 13:57:53.9969 DEBUG Получено записей: 1
2017-05-02 13:57:54.0849 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 13:57:54.0849 DEBUG Получено записей: 1
2017-05-02 13:58:07.3326 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 13:58:07.3326 DEBUG Получено записей: 1
2017-05-02 13:58:07.4516 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-05-02 13:58:07.4576 DEBUG Получено записей: 0
2017-05-02 13:58:07.4736 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls, p.kod_rias FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-05-02 13:58:09.1517 DEBUG Получено записей: 36326
2017-05-02 14:15:08.6681 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-05-02 14:15:08.7161 DEBUG Получено записей: 187
2017-05-02 14:15:10.8962 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 14:15:10.8982 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 14:15:10.9292 DEBUG Result 
2017-05-02 14:15:10.9292 DEBUG нет шаблона для пользователя
2017-05-02 14:15:10.9292 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 14:15:10.9292 DEBUG Parameters: @patterncode 
2017-05-02 14:15:10.9462 DEBUG Result 
2017-05-02 14:15:11.0012 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 14:15:11.0012 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 14:15:11.0142 DEBUG Result 
2017-05-02 14:15:11.0142 DEBUG нет шаблона для пользователя
2017-05-02 14:15:11.0142 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 14:15:11.0142 DEBUG Parameters: @patterncode 
2017-05-02 14:15:11.0292 DEBUG Result 
2017-05-02 14:15:11.3232 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-05-02 14:15:11.3232 DEBUG Получено записей: 9
2017-05-02 14:15:11.3372 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-05-02 14:15:11.3372 DEBUG Получено записей: 4
2017-05-02 14:15:11.3512 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-05-02 14:15:11.3662 DEBUG Получено записей: 22
2017-05-02 14:15:11.3662 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-05-02 14:15:11.3832 DEBUG Получено записей: 3
2017-05-02 14:15:11.3832 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-05-02 14:15:11.4002 DEBUG Получено записей: 29
2017-05-02 14:15:11.4132 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-05-02 14:15:11.4132 DEBUG Получено записей: 15
2017-05-02 14:15:11.4302 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 14:15:11.4492 DEBUG Получено записей: 113
2017-05-02 14:15:11.7172 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-05-02 14:15:11.7292 DEBUG Получено записей: 113
2017-05-02 14:15:11.7422 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-05-02 14:15:11.7422 DEBUG Получено записей: 8
2017-05-02 14:15:11.7422 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab where sp_type_napr_id!=1 ORDER BY 1;
2017-05-02 14:15:11.7582 DEBUG Получено записей: 8
2017-05-02 14:15:11.7732 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-05-02 14:15:11.7732 DEBUG Получено записей: 176
2017-05-02 14:15:11.7932 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 14:15:11.9812 DEBUG Получено записей: 13813
2017-05-02 14:15:16.5355 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-05-02 14:15:16.5355 DEBUG Получено записей: 11
2017-05-02 14:15:16.5515 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-05-02 14:15:16.5515 DEBUG Получено записей: 77
2017-05-02 14:15:16.6065 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-05-02 14:15:16.6135 DEBUG Получено записей: 107
2017-05-02 14:15:16.8615 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 14:15:16.8615 DEBUG Получено записей: 113
2017-05-02 14:15:20.0427 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-05-02 14:15:20.0427 DEBUG PatientFindForm OperatorId: 2469
2017-05-02 14:15:20.0427 DEBUG PatientFindForm DoctorId: 2469
2017-05-02 14:15:20.1327 DEBUG DoctorQuery
2017-05-02 14:15:20.1327 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 14:15:20.1327 DEBUG @date: 02.05.2017
2017-05-02 14:15:20.1327 DEBUG @doctor: 2469
2017-05-02 14:15:20.1327 DEBUG bindQueryToDataGrid
2017-05-02 14:15:20.1327 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 14:15:20.1327 DEBUG SqlParams:
2017-05-02 14:15:20.1327 DEBUG SqlParam @date='02.05.2017'
2017-05-02 14:15:20.1327 DEBUG SqlParam @doctor=2469
2017-05-02 14:15:31.1803 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-05-02 14:15:31.1803 DEBUG SqlParams:
2017-05-02 14:15:31.1803 DEBUG SqlParam @fam=вахрушкина%
2017-05-02 14:15:31.1803 DEBUG SqlParam @nam=алевтина%
2017-05-02 14:15:33.6775 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-05-02 14:15:33.7565 DEBUG Получено записей: 4
2017-05-02 14:15:33.8355 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 14:15:33.8355 DEBUG Получено записей: 1
2017-05-02 14:15:33.9305 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-05-02 14:15:33.9555 DEBUG Получено записей: 503
2017-05-02 14:15:39.7398 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-05-02 14:15:39.7428 DEBUG Получено записей: 1
2017-05-02 14:15:39.8208 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 14:15:39.8208 DEBUG Получено записей: 1
2017-05-02 14:15:42.2120 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 14:15:42.3540 DEBUG Получено записей: 13813
2017-05-02 14:15:42.4170 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 14:15:42.4280 DEBUG Получено записей: 113
2017-05-02 14:16:07.7194 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 14:16:07.7194 DEBUG Получено записей: 1
2017-05-02 14:16:12.4207 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 14:16:12.5647 DEBUG Получено записей: 13813
2017-05-02 14:16:12.6157 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 14:16:12.6157 DEBUG Получено записей: 113
2017-05-02 14:16:29.1447 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 14:16:29.1477 DEBUG Получено записей: 1
2017-05-02 14:19:46.3729 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-05-02 14:19:46.4129 DEBUG Получено записей: 187
2017-05-02 14:19:48.5331 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 14:19:48.5331 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 14:19:48.5601 DEBUG Result 
2017-05-02 14:19:48.5601 DEBUG нет шаблона для пользователя
2017-05-02 14:19:48.5601 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 14:19:48.5601 DEBUG Parameters: @patterncode 
2017-05-02 14:19:48.5741 DEBUG Result 
2017-05-02 14:19:48.6211 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-05-02 14:19:48.6211 DEBUG Parameters: @patterncode=, @operator=
2017-05-02 14:19:48.6341 DEBUG Result 
2017-05-02 14:19:48.6341 DEBUG нет шаблона для пользователя
2017-05-02 14:19:48.6341 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-05-02 14:19:48.6341 DEBUG Parameters: @patterncode 
2017-05-02 14:19:48.6461 DEBUG Result 
2017-05-02 14:19:48.9131 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-05-02 14:19:48.9131 DEBUG Получено записей: 9
2017-05-02 14:19:48.9291 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-05-02 14:19:48.9291 DEBUG Получено записей: 4
2017-05-02 14:19:48.9551 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-05-02 14:19:48.9551 DEBUG Получено записей: 22
2017-05-02 14:19:48.9761 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-05-02 14:19:48.9761 DEBUG Получено записей: 3
2017-05-02 14:19:48.9921 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-05-02 14:19:48.9921 DEBUG Получено записей: 29
2017-05-02 14:19:49.0111 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-05-02 14:19:49.0111 DEBUG Получено записей: 15
2017-05-02 14:19:49.0261 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 14:19:49.0461 DEBUG Получено записей: 113
2017-05-02 14:19:49.3241 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-05-02 14:19:49.3371 DEBUG Получено записей: 113
2017-05-02 14:19:49.3501 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-05-02 14:19:49.3501 DEBUG Получено записей: 8
2017-05-02 14:19:49.3641 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab where sp_type_napr_id!=1 ORDER BY 1;
2017-05-02 14:19:49.3641 DEBUG Получено записей: 8
2017-05-02 14:19:49.3901 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-05-02 14:19:49.3961 DEBUG Получено записей: 176
2017-05-02 14:19:49.4111 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 14:19:49.5791 DEBUG Получено записей: 13813
2017-05-02 14:19:53.3453 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-05-02 14:19:53.3453 DEBUG Получено записей: 11
2017-05-02 14:19:53.3613 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-05-02 14:19:53.3613 DEBUG Получено записей: 77
2017-05-02 14:19:53.4143 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-05-02 14:19:53.4213 DEBUG Получено записей: 107
2017-05-02 14:19:53.6944 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 14:19:53.7074 DEBUG Получено записей: 113
2017-05-02 14:19:59.9477 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-05-02 14:19:59.9477 DEBUG PatientFindForm OperatorId: 2469
2017-05-02 14:19:59.9477 DEBUG PatientFindForm DoctorId: 2469
2017-05-02 14:20:00.0737 DEBUG DoctorQuery
2017-05-02 14:20:00.0737 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 14:20:00.0737 DEBUG @date: 02.05.2017
2017-05-02 14:20:00.0737 DEBUG @doctor: 2469
2017-05-02 14:20:00.0737 DEBUG bindQueryToDataGrid
2017-05-02 14:20:00.0847 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-05-02 14:20:00.0847 DEBUG SqlParams:
2017-05-02 14:20:00.0847 DEBUG SqlParam @date='02.05.2017'
2017-05-02 14:20:00.0847 DEBUG SqlParam @doctor=2469
2017-05-02 14:20:09.2962 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-05-02 14:20:09.2962 DEBUG SqlParams:
2017-05-02 14:20:09.2962 DEBUG SqlParam @fam=вахрушкина%
2017-05-02 14:20:09.2962 DEBUG SqlParam @nam=алевтина%
2017-05-02 14:20:10.8333 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-05-02 14:20:10.9143 DEBUG Получено записей: 4
2017-05-02 14:20:10.9913 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 14:20:10.9913 DEBUG Получено записей: 1
2017-05-02 14:20:11.1204 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-05-02 14:20:11.1414 DEBUG Получено записей: 503
2017-05-02 14:20:16.9697 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-05-02 14:20:16.9727 DEBUG Получено записей: 1
2017-05-02 14:20:17.0537 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-05-02 14:20:17.0537 DEBUG Получено записей: 1
2017-05-02 14:20:21.0529 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-05-02 14:20:21.2429 DEBUG Получено записей: 13813
2017-05-02 14:20:21.3399 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-05-02 14:20:21.3399 DEBUG Получено записей: 113
2017-05-02 14:20:53.0277 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 14:20:53.0277 DEBUG Получено записей: 1
2017-05-02 14:20:56.5880 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-05-02 14:20:56.5880 DEBUG Получено записей: 1
