2017-01-30 09:57:52.0191 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-30 09:57:52.0701 DEBUG Получено записей: 187
2017-01-30 09:57:55.1632 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 09:57:55.1632 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 09:57:55.1942 DEBUG Result 
2017-01-30 09:57:55.1942 DEBUG нет шаблона для пользователя
2017-01-30 09:57:55.1942 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 09:57:55.1962 DEBUG Parameters: @patterncode 
2017-01-30 09:57:55.1962 DEBUG Result 
2017-01-30 09:57:55.2662 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 09:57:55.2662 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 09:57:55.2792 DEBUG Result 
2017-01-30 09:57:55.2792 DEBUG нет шаблона для пользователя
2017-01-30 09:57:55.2792 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 09:57:55.2792 DEBUG Parameters: @patterncode 
2017-01-30 09:57:55.2912 DEBUG Result 
2017-01-30 09:57:55.7743 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-30 09:57:55.7743 DEBUG Получено записей: 9
2017-01-30 09:57:55.7903 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-30 09:57:55.7903 DEBUG Получено записей: 4
2017-01-30 09:57:55.8053 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-30 09:57:55.8053 DEBUG Получено записей: 22
2017-01-30 09:57:55.8233 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-30 09:57:55.8233 DEBUG Получено записей: 3
2017-01-30 09:57:55.8373 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-30 09:57:55.8573 DEBUG Получено записей: 29
2017-01-30 09:57:55.8703 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-30 09:57:55.8703 DEBUG Получено записей: 15
2017-01-30 09:57:55.8853 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-30 09:57:55.9113 DEBUG Получено записей: 108
2017-01-30 09:57:56.3103 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-30 09:57:56.3233 DEBUG Получено записей: 108
2017-01-30 09:57:56.3353 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-30 09:57:56.3353 DEBUG Получено записей: 8
2017-01-30 09:57:56.3353 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-30 09:57:56.3513 DEBUG Получено записей: 9
2017-01-30 09:57:56.3513 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-30 09:57:56.4643 DEBUG Получено записей: 684
2017-01-30 09:58:24.9909 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-30 09:58:24.9969 DEBUG Получено записей: 175
2017-01-30 09:58:25.0099 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 09:58:25.2090 DEBUG Получено записей: 13813
2017-01-30 09:58:42.6389 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-30 09:58:42.6389 DEBUG Получено записей: 11
2017-01-30 09:58:42.6639 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-30 09:58:42.6709 DEBUG Получено записей: 77
2017-01-30 09:58:42.7240 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-30 09:58:42.7320 DEBUG Получено записей: 107
2017-01-30 10:07:59.0888 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-30 10:07:59.1408 DEBUG Получено записей: 187
2017-01-30 10:08:01.4369 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 10:08:01.4369 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 10:08:01.4689 DEBUG Result 
2017-01-30 10:08:01.4689 DEBUG нет шаблона для пользователя
2017-01-30 10:08:01.4689 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 10:08:01.4689 DEBUG Parameters: @patterncode 
2017-01-30 10:08:01.4839 DEBUG Result 
2017-01-30 10:08:01.5409 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 10:08:01.5409 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 10:08:01.5409 DEBUG Result 
2017-01-30 10:08:01.5409 DEBUG нет шаблона для пользователя
2017-01-30 10:08:01.5409 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 10:08:01.5409 DEBUG Parameters: @patterncode 
2017-01-30 10:08:01.5649 DEBUG Result 
2017-01-30 10:08:01.9479 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-30 10:08:01.9479 DEBUG Получено записей: 9
2017-01-30 10:08:01.9629 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-30 10:08:01.9629 DEBUG Получено записей: 4
2017-01-30 10:08:01.9629 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-30 10:08:01.9959 DEBUG Получено записей: 22
2017-01-30 10:08:02.0089 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-30 10:08:02.0089 DEBUG Получено записей: 3
2017-01-30 10:08:02.0089 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-30 10:08:02.0449 DEBUG Получено записей: 29
2017-01-30 10:08:02.0569 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-30 10:08:02.0569 DEBUG Получено записей: 15
2017-01-30 10:08:02.0709 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-30 10:08:02.0969 DEBUG Получено записей: 108
2017-01-30 10:08:02.4190 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-30 10:08:02.4340 DEBUG Получено записей: 108
2017-01-30 10:08:02.4340 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-30 10:08:02.4480 DEBUG Получено записей: 8
2017-01-30 10:08:02.4480 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-30 10:08:02.4620 DEBUG Получено записей: 9
2017-01-30 10:08:02.4620 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-30 10:08:02.5760 DEBUG Получено записей: 684
2017-01-30 10:08:39.5091 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-30 10:08:39.5151 DEBUG Получено записей: 175
2017-01-30 10:08:39.5291 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 10:08:39.7381 DEBUG Получено записей: 13813
2017-01-30 10:08:44.8774 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-30 10:08:44.8804 DEBUG Получено записей: 11
2017-01-30 10:08:44.8944 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-30 10:08:44.8944 DEBUG Получено записей: 77
2017-01-30 10:08:44.9534 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-30 10:08:44.9614 DEBUG Получено записей: 107
2017-01-30 10:08:56.2330 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-30 10:08:56.2330 DEBUG PatientFindForm OperatorId: 2469
2017-01-30 10:08:56.2330 DEBUG PatientFindForm DoctorId: 2469
2017-01-30 10:08:56.3641 DEBUG DoctorQuery
2017-01-30 10:08:56.3641 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 10:08:56.3641 DEBUG @date: 30.01.2017
2017-01-30 10:08:56.3641 DEBUG @doctor: 2469
2017-01-30 10:08:56.3641 DEBUG bindQueryToDataGrid
2017-01-30 10:08:56.3781 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 10:08:56.3781 DEBUG SqlParams:
2017-01-30 10:08:56.3781 DEBUG SqlParam @date='30.01.2017'
2017-01-30 10:08:56.3781 DEBUG SqlParam @doctor=2469
2017-01-30 10:09:09.1518 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-30 10:09:09.1518 DEBUG SqlParams:
2017-01-30 10:09:09.1518 DEBUG SqlParam @fam=аветян%
2017-01-30 10:09:09.1518 DEBUG SqlParam @nam=мактах%
2017-01-30 10:09:13.1630 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-30 10:09:13.2400 DEBUG Получено записей: 4
2017-01-30 10:09:13.3170 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-30 10:09:13.3170 DEBUG Получено записей: 0
2017-01-30 10:09:13.3170 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-30 10:09:13.3410 DEBUG Получено записей: 0
2017-01-30 10:09:13.4060 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-30 10:09:13.4170 DEBUG Получено записей: 80
2017-01-30 10:09:14.4271 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 10:09:14.4271 DEBUG Получено записей: 0
2017-01-30 10:09:14.4651 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 10:09:14.4651 DEBUG Получено записей: 0
2017-01-30 10:31:10.8754 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-30 10:31:10.9274 DEBUG Получено записей: 187
2017-01-30 10:31:13.3925 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 10:31:13.3925 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 10:31:13.4235 DEBUG Result 
2017-01-30 10:31:13.4235 DEBUG нет шаблона для пользователя
2017-01-30 10:31:13.4235 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 10:31:13.4235 DEBUG Parameters: @patterncode 
2017-01-30 10:31:13.4375 DEBUG Result 
2017-01-30 10:31:13.4925 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 10:31:13.4925 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 10:31:13.4925 DEBUG Result 
2017-01-30 10:31:13.4925 DEBUG нет шаблона для пользователя
2017-01-30 10:31:13.4925 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 10:31:13.4925 DEBUG Parameters: @patterncode 
2017-01-30 10:31:13.5175 DEBUG Result 
2017-01-30 10:31:13.9016 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-30 10:31:13.9016 DEBUG Получено записей: 9
2017-01-30 10:31:13.9166 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-30 10:31:13.9166 DEBUG Получено записей: 4
2017-01-30 10:31:13.9306 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-30 10:31:13.9306 DEBUG Получено записей: 22
2017-01-30 10:31:13.9496 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-30 10:31:13.9496 DEBUG Получено записей: 3
2017-01-30 10:31:13.9906 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-30 10:31:14.0106 DEBUG Получено записей: 29
2017-01-30 10:31:14.0236 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-30 10:31:14.0236 DEBUG Получено записей: 15
2017-01-30 10:31:14.0386 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-30 10:31:14.0656 DEBUG Получено записей: 108
2017-01-30 10:31:14.3956 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-30 10:31:14.3956 DEBUG Получено записей: 108
2017-01-30 10:31:14.4306 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-30 10:31:14.4306 DEBUG Получено записей: 8
2017-01-30 10:31:14.4456 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-30 10:31:14.4456 DEBUG Получено записей: 9
2017-01-30 10:31:14.4626 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-30 10:31:14.5666 DEBUG Получено записей: 684
2017-01-30 10:31:43.3522 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-30 10:31:43.3522 DEBUG Получено записей: 175
2017-01-30 10:31:43.3722 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 10:31:43.5622 DEBUG Получено записей: 13813
2017-01-30 10:31:48.5425 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-30 10:31:48.5475 DEBUG Получено записей: 11
2017-01-30 10:31:48.5605 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-30 10:31:48.5605 DEBUG Получено записей: 77
2017-01-30 10:31:48.6215 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-30 10:31:48.6295 DEBUG Получено записей: 107
2017-01-30 10:31:56.2800 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-30 10:31:56.2800 DEBUG PatientFindForm OperatorId: 2469
2017-01-30 10:31:56.2820 DEBUG PatientFindForm DoctorId: 2469
2017-01-30 10:31:56.4220 DEBUG DoctorQuery
2017-01-30 10:31:56.4220 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 10:31:56.4230 DEBUG @date: 30.01.2017
2017-01-30 10:31:56.4230 DEBUG @doctor: 2469
2017-01-30 10:31:56.4230 DEBUG bindQueryToDataGrid
2017-01-30 10:31:56.4230 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 10:31:56.4230 DEBUG SqlParams:
2017-01-30 10:31:56.4380 DEBUG SqlParam @date='30.01.2017'
2017-01-30 10:31:56.4380 DEBUG SqlParam @doctor=2469
2017-01-30 10:32:16.1911 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-30 10:32:16.1911 DEBUG SqlParams:
2017-01-30 10:32:16.1911 DEBUG SqlParam @fam=аветян%
2017-01-30 10:32:16.1911 DEBUG SqlParam @nam=мактах%
2017-01-30 10:32:21.2204 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-30 10:32:21.2944 DEBUG Получено записей: 4
2017-01-30 10:32:21.3714 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-30 10:32:21.3714 DEBUG Получено записей: 0
2017-01-30 10:32:21.3854 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-30 10:32:21.4044 DEBUG Получено записей: 0
2017-01-30 10:32:21.4604 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-30 10:32:21.5744 DEBUG Получено записей: 80
2017-01-30 10:32:22.8365 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 10:32:22.8365 DEBUG Получено записей: 0
2017-01-30 10:32:22.8815 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 10:32:22.8815 DEBUG Получено записей: 0
2017-01-30 17:13:02.3125 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-30 17:13:02.3645 DEBUG Получено записей: 187
2017-01-30 17:13:04.7936 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 17:13:04.7936 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 17:13:04.8306 DEBUG Result 
2017-01-30 17:13:04.8306 DEBUG нет шаблона для пользователя
2017-01-30 17:13:04.8306 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 17:13:04.8306 DEBUG Parameters: @patterncode 
2017-01-30 17:13:04.8446 DEBUG Result 
2017-01-30 17:13:04.8976 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 17:13:04.8976 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 17:13:04.8976 DEBUG Result 
2017-01-30 17:13:04.8976 DEBUG нет шаблона для пользователя
2017-01-30 17:13:04.8976 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 17:13:04.8976 DEBUG Parameters: @patterncode 
2017-01-30 17:13:04.9206 DEBUG Result 
2017-01-30 17:13:05.3056 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-30 17:13:05.3056 DEBUG Получено записей: 9
2017-01-30 17:13:05.3196 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-30 17:13:05.3196 DEBUG Получено записей: 4
2017-01-30 17:13:05.3196 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-30 17:13:05.3376 DEBUG Получено записей: 22
2017-01-30 17:13:05.3496 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-30 17:13:05.3496 DEBUG Получено записей: 3
2017-01-30 17:13:05.3496 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-30 17:13:05.3827 DEBUG Получено записей: 29
2017-01-30 17:13:05.3827 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-30 17:13:05.3977 DEBUG Получено записей: 15
2017-01-30 17:13:05.3977 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-30 17:13:05.4327 DEBUG Получено записей: 108
2017-01-30 17:13:05.7107 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-30 17:13:05.7107 DEBUG Получено записей: 108
2017-01-30 17:13:05.7327 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-30 17:13:05.7327 DEBUG Получено записей: 8
2017-01-30 17:13:05.7447 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-30 17:13:05.7447 DEBUG Получено записей: 9
2017-01-30 17:13:05.7567 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-30 17:13:05.8627 DEBUG Получено записей: 684
2017-01-30 17:13:32.2952 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-30 17:13:32.2952 DEBUG Получено записей: 175
2017-01-30 17:13:32.3132 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 17:13:32.5132 DEBUG Получено записей: 13813
2017-01-30 17:13:38.3245 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-30 17:13:38.3275 DEBUG Получено записей: 11
2017-01-30 17:13:38.3455 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-30 17:13:38.3455 DEBUG Получено записей: 77
2017-01-30 17:13:38.4025 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-30 17:13:38.4105 DEBUG Получено записей: 107
2017-01-30 17:13:44.7299 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-30 17:13:44.7299 DEBUG PatientFindForm OperatorId: 2469
2017-01-30 17:13:44.7299 DEBUG PatientFindForm DoctorId: 2469
2017-01-30 17:13:44.8799 DEBUG DoctorQuery
2017-01-30 17:13:44.8799 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 17:13:44.8799 DEBUG @date: 30.01.2017
2017-01-30 17:13:44.8799 DEBUG @doctor: 2469
2017-01-30 17:13:44.8799 DEBUG bindQueryToDataGrid
2017-01-30 17:13:44.8949 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 17:13:44.8949 DEBUG SqlParams:
2017-01-30 17:13:44.8949 DEBUG SqlParam @date='30.01.2017'
2017-01-30 17:13:44.8949 DEBUG SqlParam @doctor=2469
2017-01-30 17:14:01.6129 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-30 17:14:01.6129 DEBUG SqlParams:
2017-01-30 17:14:01.6129 DEBUG SqlParam @fam=аветян%
2017-01-30 17:14:01.6129 DEBUG SqlParam @nam=мактах%
2017-01-30 17:14:06.0431 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-30 17:14:06.1221 DEBUG Получено записей: 4
2017-01-30 17:14:06.1971 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-30 17:14:06.1971 DEBUG Получено записей: 0
2017-01-30 17:14:06.2101 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-30 17:14:06.2241 DEBUG Получено записей: 0
2017-01-30 17:14:06.2801 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-30 17:14:06.3211 DEBUG Получено записей: 80
2017-01-30 17:14:07.3352 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 17:14:07.3352 DEBUG Получено записей: 0
2017-01-30 17:14:07.3732 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 17:14:07.3772 DEBUG Получено записей: 0
2017-01-30 17:14:58.6821 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 17:14:58.6851 DEBUG Получено записей: 2
2017-01-30 17:14:58.7971 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 17:14:58.7971 DEBUG Получено записей: 0
2017-01-30 17:14:58.8761 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-30 17:14:58.8761 DEBUG Получено записей: 0
2017-01-30 17:14:58.8961 DEBUG Запрос: SELECT s.name, s.code, c.date_begin, c.date_end, c.cost, e.sp_uslug_id as service_id  FROM eq_uslug_doctor_tab e JOIN eq_uslug_cost_tab c ON c.sp_uslug_id = e.sp_uslug_id AND sp_lpu_id = get_lpu_number()::bigint AND c.sp_kind_paid_id = 0 AND @visitDate::date BETWEEN date_begin AND date_end LEFT JOIN codifiers.sp_uslug_tab s ON s.id = e.sp_uslug_id WHERE e.doctor_id = @doctorId ORDER BY 1,2;
2017-01-30 17:14:58.9091 DEBUG Получено записей: 0
2017-01-30 17:14:58.9241 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-30 17:15:00.8913 DEBUG Получено записей: 36286
2017-01-30 17:15:12.0979 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 17:15:12.3339 DEBUG Получено записей: 13813
2017-01-30 17:15:12.3539 DEBUG Запрос: Select sp_stadiya_diagn_id, name_stadiya from public.sp_stadiya_diagn_tab order by sp_stadiya_diagn_id
2017-01-30 17:15:12.3539 DEBUG Получено записей: 3
2017-01-30 17:15:12.3669 DEBUG Запрос: Select id, name, code, sort from codifiers.sp_disease_vid_tab order by sort
2017-01-30 17:15:12.3669 DEBUG Получено записей: 6
2017-01-30 17:15:12.3819 DEBUG Запрос: Select id, name, code, sort from codifiers.diagn_type_tab order by sort
2017-01-30 17:15:12.3819 DEBUG Получено записей: 4
2017-01-30 17:15:12.3959 DEBUG Запрос: SELECT id, code, diagn FROM codifiers.bur_unpaid_diagns
2017-01-30 17:15:12.3959 DEBUG Получено записей: 94
2017-01-30 17:15:14.4430 DEBUG Запрос: SELECT DISTINCT diagn_id FROM dispan_uchet_tab WHERE dan_id = @patientId AND (date_sn IS NULL OR date_sn < current_date) ORDER BY 1;
2017-01-30 17:15:14.4430 DEBUG Получено записей: 0
2017-01-30 17:15:14.4700 DEBUG Запрос: SELECT DISTINCT diagn_osn FROM diagn_tab WHERE talon_id IN (SELECT talon_id FROM talon_tab WHERE dan_id = @patientId) ORDER BY 1;
2017-01-30 17:15:14.4790 DEBUG Получено записей: 3
2017-01-30 17:24:01.8472 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-30 17:24:01.8992 DEBUG Получено записей: 187
2017-01-30 17:24:04.3723 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 17:24:04.3723 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 17:24:04.4033 DEBUG Result 
2017-01-30 17:24:04.4033 DEBUG нет шаблона для пользователя
2017-01-30 17:24:04.4033 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 17:24:04.4033 DEBUG Parameters: @patterncode 
2017-01-30 17:24:04.4193 DEBUG Result 
2017-01-30 17:24:04.4763 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 17:24:04.4763 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 17:24:04.4893 DEBUG Result 
2017-01-30 17:24:04.4893 DEBUG нет шаблона для пользователя
2017-01-30 17:24:04.4893 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 17:24:04.4893 DEBUG Parameters: @patterncode 
2017-01-30 17:24:04.5034 DEBUG Result 
2017-01-30 17:24:04.9034 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-30 17:24:04.9074 DEBUG Получено записей: 9
2017-01-30 17:24:04.9074 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-30 17:24:04.9214 DEBUG Получено записей: 4
2017-01-30 17:24:04.9214 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-30 17:24:04.9394 DEBUG Получено записей: 22
2017-01-30 17:24:04.9524 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-30 17:24:04.9524 DEBUG Получено записей: 3
2017-01-30 17:24:04.9674 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-30 17:24:04.9884 DEBUG Получено записей: 29
2017-01-30 17:24:05.0024 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-30 17:24:05.0024 DEBUG Получено записей: 15
2017-01-30 17:24:05.0164 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-30 17:24:05.0424 DEBUG Получено записей: 108
2017-01-30 17:24:05.3644 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-30 17:24:05.3774 DEBUG Получено записей: 108
2017-01-30 17:24:05.3894 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-30 17:24:05.3894 DEBUG Получено записей: 8
2017-01-30 17:24:05.4044 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-30 17:24:05.4044 DEBUG Получено записей: 9
2017-01-30 17:24:05.4044 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-30 17:24:05.5204 DEBUG Получено записей: 684
2017-01-30 17:24:33.4910 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-30 17:24:33.4910 DEBUG Получено записей: 175
2017-01-30 17:24:33.5100 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 17:24:33.7250 DEBUG Получено записей: 13813
2017-01-30 17:24:41.3055 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-30 17:24:41.3055 DEBUG Получено записей: 11
2017-01-30 17:24:41.3225 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-30 17:24:41.3225 DEBUG Получено записей: 77
2017-01-30 17:24:41.3785 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-30 17:24:41.3785 DEBUG Получено записей: 107
2017-01-30 17:24:47.3848 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-30 17:24:47.3848 DEBUG PatientFindForm OperatorId: 2469
2017-01-30 17:24:47.3848 DEBUG PatientFindForm DoctorId: 2469
2017-01-30 17:24:47.5208 DEBUG DoctorQuery
2017-01-30 17:24:47.5208 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 17:24:47.5208 DEBUG @date: 30.01.2017
2017-01-30 17:24:47.5208 DEBUG @doctor: 2469
2017-01-30 17:24:47.5208 DEBUG bindQueryToDataGrid
2017-01-30 17:24:47.5348 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 17:24:47.5348 DEBUG SqlParams:
2017-01-30 17:24:47.5348 DEBUG SqlParam @date='30.01.2017'
2017-01-30 17:24:47.5348 DEBUG SqlParam @doctor=2469
2017-01-30 17:25:00.6636 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-30 17:25:00.6636 DEBUG SqlParams:
2017-01-30 17:25:00.6636 DEBUG SqlParam @fam=аветян%
2017-01-30 17:25:00.6636 DEBUG SqlParam @nam=мактах%
2017-01-30 17:25:05.6598 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-30 17:25:05.7339 DEBUG Получено записей: 4
2017-01-30 17:25:05.8029 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-30 17:25:05.8029 DEBUG Получено записей: 0
2017-01-30 17:25:05.8149 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-30 17:25:05.8259 DEBUG Получено записей: 0
2017-01-30 17:25:05.8789 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-30 17:25:05.8889 DEBUG Получено записей: 80
2017-01-30 17:25:06.7899 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 17:25:06.7929 DEBUG Получено записей: 0
2017-01-30 17:25:06.8249 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 17:25:06.8249 DEBUG Получено записей: 0
2017-01-30 17:25:17.4525 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 17:25:17.4525 DEBUG Получено записей: 2
2017-01-30 17:25:17.5515 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 17:25:17.5555 DEBUG Получено записей: 0
2017-01-30 17:25:17.6255 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-30 17:25:17.6255 DEBUG Получено записей: 0
2017-01-30 17:25:17.6505 DEBUG Запрос: SELECT s.name, s.code, c.date_begin, c.date_end, c.cost, e.sp_uslug_id as service_id  FROM eq_uslug_doctor_tab e JOIN eq_uslug_cost_tab c ON c.sp_uslug_id = e.sp_uslug_id AND sp_lpu_id = get_lpu_number()::bigint AND c.sp_kind_paid_id = 0 AND @visitDate::date BETWEEN date_begin AND date_end LEFT JOIN codifiers.sp_uslug_tab s ON s.id = e.sp_uslug_id WHERE e.doctor_id = @doctorId ORDER BY 1,2;
2017-01-30 17:25:17.6505 DEBUG Получено записей: 0
2017-01-30 17:25:17.6775 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-30 17:25:19.5366 DEBUG Получено записей: 36286
2017-01-30 17:25:29.7652 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 17:25:29.9942 DEBUG Получено записей: 13813
2017-01-30 17:25:30.0462 DEBUG Запрос: Select sp_stadiya_diagn_id, name_stadiya from public.sp_stadiya_diagn_tab order by sp_stadiya_diagn_id
2017-01-30 17:25:30.0462 DEBUG Получено записей: 3
2017-01-30 17:25:30.0592 DEBUG Запрос: Select id, name, code, sort from codifiers.sp_disease_vid_tab order by sort
2017-01-30 17:25:30.0592 DEBUG Получено записей: 6
2017-01-30 17:25:30.0712 DEBUG Запрос: Select id, name, code, sort from codifiers.diagn_type_tab order by sort
2017-01-30 17:25:30.0712 DEBUG Получено записей: 4
2017-01-30 17:25:30.0842 DEBUG Запрос: SELECT id, code, diagn FROM codifiers.bur_unpaid_diagns
2017-01-30 17:25:30.0842 DEBUG Получено записей: 94
2017-01-30 17:25:32.2544 DEBUG Запрос: SELECT DISTINCT diagn_id FROM dispan_uchet_tab WHERE dan_id = @patientId AND (date_sn IS NULL OR date_sn < current_date) ORDER BY 1;
2017-01-30 17:25:32.2544 DEBUG Получено записей: 0
2017-01-30 17:25:32.2734 DEBUG Запрос: SELECT DISTINCT diagn_osn FROM diagn_tab WHERE talon_id IN (SELECT talon_id FROM talon_tab WHERE dan_id = @patientId) ORDER BY 1;
2017-01-30 17:25:32.2734 DEBUG Получено записей: 3
2017-01-30 17:30:11.2003 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-30 17:30:11.2493 DEBUG Получено записей: 187
2017-01-30 17:30:13.6335 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 17:30:13.6335 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 17:30:13.6615 DEBUG Result 
2017-01-30 17:30:13.6615 DEBUG нет шаблона для пользователя
2017-01-30 17:30:13.6615 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 17:30:13.6615 DEBUG Parameters: @patterncode 
2017-01-30 17:30:13.6615 DEBUG Result 
2017-01-30 17:30:13.7325 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 17:30:13.7325 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 17:30:13.7445 DEBUG Result 
2017-01-30 17:30:13.7445 DEBUG нет шаблона для пользователя
2017-01-30 17:30:13.7445 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 17:30:13.7445 DEBUG Parameters: @patterncode 
2017-01-30 17:30:13.7565 DEBUG Result 
2017-01-30 17:30:14.1485 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-30 17:30:14.1485 DEBUG Получено записей: 9
2017-01-30 17:30:14.1635 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-30 17:30:14.1635 DEBUG Получено записей: 4
2017-01-30 17:30:14.1765 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-30 17:30:14.1765 DEBUG Получено записей: 22
2017-01-30 17:30:14.1935 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-30 17:30:14.1935 DEBUG Получено записей: 3
2017-01-30 17:30:14.2075 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-30 17:30:14.2255 DEBUG Получено записей: 29
2017-01-30 17:30:14.2375 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-30 17:30:14.2375 DEBUG Получено записей: 15
2017-01-30 17:30:14.2375 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-30 17:30:14.2745 DEBUG Получено записей: 108
2017-01-30 17:30:14.5805 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-30 17:30:14.5935 DEBUG Получено записей: 108
2017-01-30 17:30:14.6045 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-30 17:30:14.6045 DEBUG Получено записей: 8
2017-01-30 17:30:14.6165 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-30 17:30:14.6165 DEBUG Получено записей: 9
2017-01-30 17:30:14.6295 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-30 17:30:14.7225 DEBUG Получено записей: 684
2017-01-30 17:30:40.7540 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-30 17:30:40.7600 DEBUG Получено записей: 175
2017-01-30 17:30:40.7740 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 17:30:41.0020 DEBUG Получено записей: 13813
2017-01-30 17:30:45.8713 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-30 17:30:45.8713 DEBUG Получено записей: 11
2017-01-30 17:30:45.8863 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-30 17:30:45.8923 DEBUG Получено записей: 77
2017-01-30 17:30:45.9543 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-30 17:30:45.9543 DEBUG Получено записей: 107
2017-01-30 17:30:51.8376 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-30 17:30:51.8376 DEBUG PatientFindForm OperatorId: 2469
2017-01-30 17:30:51.8376 DEBUG PatientFindForm DoctorId: 2469
2017-01-30 17:30:51.9617 DEBUG DoctorQuery
2017-01-30 17:30:51.9617 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 17:30:51.9617 DEBUG @date: 30.01.2017
2017-01-30 17:30:51.9617 DEBUG @doctor: 2469
2017-01-30 17:30:51.9617 DEBUG bindQueryToDataGrid
2017-01-30 17:30:51.9767 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 17:30:52.0167 DEBUG SqlParams:
2017-01-30 17:30:52.0167 DEBUG SqlParam @date='30.01.2017'
2017-01-30 17:30:52.0167 DEBUG SqlParam @doctor=2469
2017-01-30 17:31:03.4823 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-30 17:31:03.4823 DEBUG SqlParams:
2017-01-30 17:31:03.4823 DEBUG SqlParam @fam=аветян%
2017-01-30 17:31:03.4823 DEBUG SqlParam @nam=мактах%
2017-01-30 17:31:07.7116 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-30 17:31:07.7856 DEBUG Получено записей: 4
2017-01-30 17:31:07.8536 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-30 17:31:07.8576 DEBUG Получено записей: 0
2017-01-30 17:31:07.8576 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-30 17:31:07.8766 DEBUG Получено записей: 0
2017-01-30 17:31:07.9336 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-30 17:31:07.9336 DEBUG Получено записей: 80
2017-01-30 17:31:08.8396 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 17:31:08.8396 DEBUG Получено записей: 0
2017-01-30 17:31:08.8776 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 17:31:08.8776 DEBUG Получено записей: 0
2017-01-30 17:31:27.7697 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 17:31:27.7697 DEBUG Получено записей: 3
2017-01-30 17:31:27.9127 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 17:31:27.9127 DEBUG Получено записей: 0
2017-01-30 17:31:27.9927 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-30 17:31:28.0957 DEBUG Получено записей: 0
2017-01-30 17:31:28.1097 DEBUG Запрос: SELECT s.name, s.code, c.date_begin, c.date_end, c.cost, e.sp_uslug_id as service_id  FROM eq_uslug_doctor_tab e JOIN eq_uslug_cost_tab c ON c.sp_uslug_id = e.sp_uslug_id AND sp_lpu_id = get_lpu_number()::bigint AND c.sp_kind_paid_id = 0 AND @visitDate::date BETWEEN date_begin AND date_end LEFT JOIN codifiers.sp_uslug_tab s ON s.id = e.sp_uslug_id WHERE e.doctor_id = @doctorId ORDER BY 1,2;
2017-01-30 17:31:28.1227 DEBUG Получено записей: 0
2017-01-30 17:31:28.1367 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-30 17:31:30.0638 DEBUG Получено записей: 36286
2017-01-30 17:31:39.1104 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 17:31:39.3074 DEBUG Получено записей: 13813
2017-01-30 17:31:39.3284 DEBUG Запрос: Select sp_stadiya_diagn_id, name_stadiya from public.sp_stadiya_diagn_tab order by sp_stadiya_diagn_id
2017-01-30 17:31:39.3284 DEBUG Получено записей: 3
2017-01-30 17:31:39.3394 DEBUG Запрос: Select id, name, code, sort from codifiers.sp_disease_vid_tab order by sort
2017-01-30 17:31:39.3394 DEBUG Получено записей: 6
2017-01-30 17:31:39.3524 DEBUG Запрос: Select id, name, code, sort from codifiers.diagn_type_tab order by sort
2017-01-30 17:31:39.3524 DEBUG Получено записей: 4
2017-01-30 17:31:39.3524 DEBUG Запрос: SELECT id, code, diagn FROM codifiers.bur_unpaid_diagns
2017-01-30 17:31:39.3674 DEBUG Получено записей: 94
2017-01-30 17:31:41.2975 DEBUG Запрос: SELECT DISTINCT diagn_id FROM dispan_uchet_tab WHERE dan_id = @patientId AND (date_sn IS NULL OR date_sn < current_date) ORDER BY 1;
2017-01-30 17:31:41.3085 DEBUG Получено записей: 0
2017-01-30 17:31:41.3175 DEBUG Запрос: SELECT DISTINCT diagn_osn FROM diagn_tab WHERE talon_id IN (SELECT talon_id FROM talon_tab WHERE dan_id = @patientId) ORDER BY 1;
2017-01-30 17:31:41.3175 DEBUG Получено записей: 3
2017-01-30 17:42:43.4984 DEBUG Запрос: SELECT DISTINCT code_access, name, description 
                            FROM users_access_view WHERE users_id = @id
2017-01-30 17:42:43.5494 DEBUG Получено записей: 187
2017-01-30 17:42:45.9655 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 17:42:45.9655 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 17:42:45.9955 DEBUG Result 
2017-01-30 17:42:46.0405 DEBUG нет шаблона для пользователя
2017-01-30 17:42:46.0405 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 17:42:46.0405 DEBUG Parameters: @patterncode 
2017-01-30 17:42:46.0565 DEBUG Result 
2017-01-30 17:42:46.1125 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null;
2017-01-30 17:42:46.1125 DEBUG Parameters: @patterncode=, @operator=
2017-01-30 17:42:46.1245 DEBUG Result 
2017-01-30 17:42:46.1245 DEBUG нет шаблона для пользователя
2017-01-30 17:42:46.1245 DEBUG SQL: select pattern from codifiers.patterns_tab where code = @patterncode and users_id is null
2017-01-30 17:42:46.1245 DEBUG Parameters: @patterncode 
2017-01-30 17:42:46.1375 DEBUG Result 
2017-01-30 17:42:46.5165 DEBUG Запрос: Select id, name, code, is_default, parent_id from codifiers.sp_kind_paid_tab order by id
2017-01-30 17:42:46.5165 DEBUG Получено записей: 9
2017-01-30 17:42:46.5315 DEBUG Запрос: Select id, name, code from codifiers.first_visit_condition_tab order by id
2017-01-30 17:42:46.5315 DEBUG Получено записей: 4
2017-01-30 17:42:46.5455 DEBUG Запрос: Select id, name, code, reestr, idsp, hospital_type_id, is_cure, is_inspection from codifiers.visit_purpose_common_tab order by id
2017-01-30 17:42:46.5455 DEBUG Получено записей: 22
2017-01-30 17:42:46.5635 DEBUG Запрос: Select id, name, code from codifiers.place_service_tab order by id
2017-01-30 17:42:46.5635 DEBUG Получено записей: 3
2017-01-30 17:42:46.5915 DEBUG Запрос: Select result_id, result, reestr, patient_state_id, reestr_rslt, reestr_ishod, _end from public.result_tab order by result_id
2017-01-30 17:42:46.5915 DEBUG Получено записей: 29
2017-01-30 17:42:46.6095 DEBUG Запрос: select id, name, code, bur_reestr_code from codifiers.travma_tab order by name;
2017-01-30 17:42:46.6095 DEBUG Получено записей: 15
2017-01-30 17:42:46.6235 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab
2017-01-30 17:42:46.6495 DEBUG Получено записей: 108
2017-01-30 17:42:46.9816 DEBUG Запрос: SELECT * FROM codifiers.lpu_tab order by name
2017-01-30 17:42:46.9956 DEBUG Получено записей: 108
2017-01-30 17:42:47.0066 DEBUG Запрос: select sp_napr_obosn_id,trim(obosn_name) as obosn_name FROM sp_napr_obosn_tab ORDER BY sp_napr_obosn_id;
2017-01-30 17:42:47.0066 DEBUG Получено записей: 8
2017-01-30 17:42:47.0206 DEBUG Запрос: SELECT sp_type_napr_id, sp_type_napr FROM sp_type_napr_tab ORDER BY 1;
2017-01-30 17:42:47.0206 DEBUG Получено записей: 9
2017-01-30 17:42:47.0206 DEBUG Запрос: select * from public.doctor_tab where sp_spec_doctor_id <> 900;
2017-01-30 17:42:47.1346 DEBUG Получено записей: 684
2017-01-30 17:43:13.9291 DEBUG Запрос: select id, code, name from codifiers.doctor_spec_tab order by 3,1;
2017-01-30 17:43:13.9361 DEBUG Получено записей: 175
2017-01-30 17:43:13.9481 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 17:43:14.1501 DEBUG Получено записей: 13813
2017-01-30 17:43:19.9444 DEBUG Запрос: Select s.id, s.code, s.name from codifiers.sozstatus_tab s
2017-01-30 17:43:19.9444 DEBUG Получено записей: 11
2017-01-30 17:43:19.9614 DEBUG Запрос: Select u.id, u.code, u.name, u.doctor_id, u.otdel_id, u.age_from, u.age_for, u.flag_default, u.uchactok_type_id, u.lpu_id, u.sort, u.sex from codifiers.uchactok_tab u order by u.sort, u.name
2017-01-30 17:43:19.9684 DEBUG Получено записей: 77
2017-01-30 17:43:20.0214 DEBUG Запрос: select id, socr, name, full_name, index, code 
                              from codifiers.sp_kladr_tab
                              where level_ter=@level order by name
2017-01-30 17:43:20.0374 DEBUG Получено записей: 107
2017-01-30 17:43:27.5219 DEBUG PatientFindForm ShowFilterByDoctor set to true
2017-01-30 17:43:27.5219 DEBUG PatientFindForm OperatorId: 2469
2017-01-30 17:43:27.5219 DEBUG PatientFindForm DoctorId: 2469
2017-01-30 17:43:29.4440 DEBUG DoctorQuery
2017-01-30 17:43:29.4440 DEBUG sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 17:43:29.4440 DEBUG @date: 30.01.2017
2017-01-30 17:43:29.4440 DEBUG @doctor: 2469
2017-01-30 17:43:29.4440 DEBUG bindQueryToDataGrid
2017-01-30 17:43:29.4600 DEBUG Sql: SELECT td.time_nazn as "Время записи", d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен", case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d LEFT JOIN public.talon_doctor_tab td on td.dan_id = d.dan_id WHERE td.date_nazn = date(@date) and td.doctor_id = @doctor;
2017-01-30 17:43:29.4600 DEBUG SqlParams:
2017-01-30 17:43:29.4600 DEBUG SqlParam @date='30.01.2017'
2017-01-30 17:43:29.4600 DEBUG SqlParam @doctor=2469
2017-01-30 17:43:44.4138 DEBUG Sql: SELECT d.dan_id as "Id", d.fam as "Фамилия", d.nam as "Имя", d.mid as "Отчество", d.date_born as "Дата рождения", case when d.ser_pol is null then d.num_pol else d.ser_pol ||' '|| d.num_pol end as "Полис", d.pens as "СНИЛС", d.address as "Адрес", case when spolref='2301001' then true else false end as "Прикреплен" , case when strcom_region_id='0300000000000' then false else true end as "Иногородний" FROM dan_tab d WHERE Lower(d.fam) LIKE @fam and Lower(d.nam) LIKE @nam ORDER BY d.fam, d.nam, d.mid, d.date_born LIMIT 150;
2017-01-30 17:43:44.4138 DEBUG SqlParams:
2017-01-30 17:43:44.4138 DEBUG SqlParam @fam=аветян%
2017-01-30 17:43:44.4138 DEBUG SqlParam @nam=мактах%
2017-01-30 17:43:48.2171 DEBUG Запрос: Select smo.id, smo.name, kladr.name from codifiers.strcom_tab smo left join codifiers.sp_kladr_tab kladr on smo.region_id = kladr.code where smo.region_id = @id and smo.name not like '*%'order by smo.name
2017-01-30 17:43:48.2931 DEBUG Получено записей: 4
2017-01-30 17:43:48.3661 DEBUG Запрос: select * from fed_lgota_tab where pens like @snils;
2017-01-30 17:43:48.3661 DEBUG Получено записей: 0
2017-01-30 17:43:48.3791 DEBUG Запрос: select * from lgot_client_tab where dan_id = @id;
2017-01-30 17:43:48.3911 DEBUG Получено записей: 0
2017-01-30 17:43:48.4471 DEBUG Запрос: SELECT t.talon_id, t.result_id, t.diag_osn, t.doctor_id, t.date_vnes_inf,
                        v.visit_id, v.doctor_id as vdoctor_id, v.data_vnes_inf as vdate_vnes_inf, v.data_pos 
                        FROM public.talon_tab t left join public.visit_tab v on v.talon_id = t.talon_id
                        where t.dan_id = @patient_id;
2017-01-30 17:43:48.4581 DEBUG Получено записей: 80
2017-01-30 17:43:49.4611 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 17:43:49.4611 DEBUG Получено записей: 0
2017-01-30 17:43:49.5011 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 17:43:49.5011 DEBUG Получено записей: 0
2017-01-30 17:44:01.2198 DEBUG Запрос: Select visit_id from public.visit_tab where talon_id = @talonId;
2017-01-30 17:44:01.2198 DEBUG Получено записей: 2
2017-01-30 17:44:01.3428 DEBUG Запрос: SELECT d.id FROM diagn_tab d WHERE d.talon_id = @caseId ORDER BY d.id desc;
2017-01-30 17:44:01.3428 DEBUG Получено записей: 0
2017-01-30 17:44:01.4228 DEBUG Запрос: SELECT c.name, o.kol_vo, o.id, o.sp_uslug_id, o.inference_diagnosis FROM okaz_uslug_tab o LEFT JOIN codifiers.sp_uslug_tab c ON c.id = o.sp_uslug_id WHERE table_link_name = 'visit_tab' AND  table_link_id = @visitId;
2017-01-30 17:44:01.4228 DEBUG Получено записей: 0
2017-01-30 17:44:01.4428 DEBUG Запрос: SELECT s.name, s.code, c.date_begin, c.date_end, c.cost, e.sp_uslug_id as service_id  FROM eq_uslug_doctor_tab e JOIN eq_uslug_cost_tab c ON c.sp_uslug_id = e.sp_uslug_id AND sp_lpu_id = get_lpu_number()::bigint AND c.sp_kind_paid_id = 0 AND @visitDate::date BETWEEN date_begin AND date_end LEFT JOIN codifiers.sp_uslug_tab s ON s.id = e.sp_uslug_id WHERE e.doctor_id = @doctorId ORDER BY 1,2;
2017-01-30 17:44:01.4568 DEBUG Получено записей: 0
2017-01-30 17:44:01.4698 DEBUG Запрос: SELECT p.id, p.name, p.code, p.sp_trnm_id, tr.name_lat AS nam_lat, tr.name AS nam_rus, p.sp_mnn_id, mnn.name_lat AS mnn_lat, mnn.name AS mnn_rus, p.sp_lf_id, lf.name as dtd, p.name_fct, p.name_cnf, p.doza, p.signa, p.price, p.sp_doza_id, p.d_ls FROM codifiers.preparat_tab p LEFT JOIN codifiers.sp_lf_tab lf ON lf.id = p.sp_lf_id LEFT JOIN codifiers.sp_trnm_tab tr ON tr.id = p.sp_trnm_id LEFT JOIN codifiers.sp_mnn_tab mnn ON mnn.id = p.sp_mnn_id;
2017-01-30 17:44:03.5239 DEBUG Получено записей: 36286
2017-01-30 17:44:12.1984 DEBUG Запрос: Select mkb_id, mkb, kod_d, reestr_code from public.mkb_tab order by 1
2017-01-30 17:44:12.4204 DEBUG Получено записей: 13813
2017-01-30 17:44:12.4414 DEBUG Запрос: Select sp_stadiya_diagn_id, name_stadiya from public.sp_stadiya_diagn_tab order by sp_stadiya_diagn_id
2017-01-30 17:44:12.4414 DEBUG Получено записей: 3
2017-01-30 17:44:12.4534 DEBUG Запрос: Select id, name, code, sort from codifiers.sp_disease_vid_tab order by sort
2017-01-30 17:44:12.4534 DEBUG Получено записей: 6
2017-01-30 17:44:12.4664 DEBUG Запрос: Select id, name, code, sort from codifiers.diagn_type_tab order by sort
2017-01-30 17:44:12.4664 DEBUG Получено записей: 4
2017-01-30 17:44:12.4794 DEBUG Запрос: SELECT id, code, diagn FROM codifiers.bur_unpaid_diagns
2017-01-30 17:44:12.4794 DEBUG Получено записей: 94
2017-01-30 17:44:14.3576 DEBUG Запрос: SELECT DISTINCT diagn_id FROM dispan_uchet_tab WHERE dan_id = @patientId AND (date_sn IS NULL OR date_sn < current_date) ORDER BY 1;
2017-01-30 17:44:14.3686 DEBUG Получено записей: 0
2017-01-30 17:44:14.3686 DEBUG Запрос: SELECT DISTINCT diagn_osn FROM diagn_tab WHERE talon_id IN (SELECT talon_id FROM talon_tab WHERE dan_id = @patientId) ORDER BY 1;
2017-01-30 17:44:14.3846 DEBUG Получено записей: 3
